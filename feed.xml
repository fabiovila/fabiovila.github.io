<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.3">Jekyll</generator><link href="http://0.0.0.0:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://0.0.0.0:4000/" rel="alternate" type="text/html" /><updated>2024-01-23T19:04:30-06:00</updated><id>http://0.0.0.0:4000/feed.xml</id><title type="html">Your awesome title</title><subtitle>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</subtitle><entry><title type="html">Código de Cores de capacitores - Aplicativo</title><link href="http://0.0.0.0:4000/app/2024/01/23/polegadasmm.html" rel="alternate" type="text/html" title="Código de Cores de capacitores - Aplicativo" /><published>2024-01-23T00:00:00-06:00</published><updated>2024-01-23T00:00:00-06:00</updated><id>http://0.0.0.0:4000/app/2024/01/23/polegadasmm</id><content type="html" xml:base="http://0.0.0.0:4000/app/2024/01/23/polegadasmm.html">&lt;script&gt;
var valor = 220000;
var unidade = &quot;&quot;;
var faixas = [2,2,10000,0,0];
function updateValor(v,m) {
  var option = v.selectedOptions[0].style[&quot;background-color&quot;];
  faixas[m] = Number(v.value);
  valor = (faixas[0]+faixas[1]*10)*faixas[2];


  console.log(faixas,valor);
  tolerancia = faixas[3] + &quot;%&quot;;
  if (valor &lt; 1000) {
    unidade = &quot; pF&quot;;
  } else if (valor &gt;= 1000 &amp;&amp; valor &lt; 1000000) {
    unidade = &quot; nF&quot;;
    valor = valor / 1000;
  } else if (valor &gt;= 1000000 &amp;&amp; valor &lt; 1000000000) {
    unidade = &quot; uF&quot;;
    valor = valor / 1000000;
  } else if (valor &gt;= 1000000000 &amp;&amp; valor &lt; 1000000000000) {
    unidade = &quot; mF&quot;;
    valor = valor / 1000000000;
  }

  valor = valor.toLocaleString(&apos;pt-BR&apos;, {minimumFractionDigits:0, maximumFractionDigits:2}) + unidade;
  document.faixas[m].style.fill = option;
  document.texto.innerHTML = valor;
  $(&quot;valor&quot;).innerText = valor;
  $(&quot;tolerancia&quot;).innerText = tolerancia;
}


&lt;/script&gt;

&lt;div class=&quot;section&quot;&gt;
&lt;div class=&quot;subtitle has-text-centered&quot;&gt;Selecione as cores para obter o resultado&lt;/div&gt;
&lt;div class=&quot;field is-grouped is-grouped-centered&quot;&gt;
  &lt;div class=&quot;control&quot;&gt;
      &lt;small&gt;1° Faixa&lt;/small&gt;
      &lt;div class=&quot;is-multiple&quot;&gt;
      &lt;select id=&quot;s1&quot; multiple=&quot;&quot; size=&quot;12&quot; onchange=&quot;updateValor(this,0);&quot;&gt;
        &lt;option selected=&quot;selected&quot; style=&quot;background-color: brown; color: white;&quot; value=&quot;1&quot;&gt;Marrom&lt;/option&gt;
        &lt;option style=&quot;background-color: red; color: white;&quot; value=&quot;2&quot;&gt;Vermelho&lt;/option&gt;
        &lt;option style=&quot;background-color: orange; color: white;&quot; value=&quot;3&quot;&gt;Laranja&lt;/option&gt;
        &lt;option style=&quot;background-color: yellow; color: black;&quot; value=&quot;4&quot;&gt;Amarelo&lt;/option&gt;
        &lt;option style=&quot;background-color: green; color: black;&quot; value=&quot;5&quot;&gt;Verde&lt;/option&gt;
        &lt;option style=&quot;background-color: blue; color: white;&quot; value=&quot;6&quot;&gt;Azul&lt;/option&gt;
        &lt;option style=&quot;background-color: violet; color: black;&quot; value=&quot;7&quot;&gt;Violeta&lt;/option&gt;
        &lt;option style=&quot;background-color: gray; color: black;&quot; value=&quot;8&quot;&gt;Cinza&lt;/option&gt;
        &lt;option style=&quot;background-color: white; color: black;&quot; value=&quot;9&quot;&gt;Branco&lt;/option&gt;
      &lt;/select&gt;
      &lt;/div&gt;
  &lt;/div&gt;

    &lt;div class=&quot;control&quot;&gt;
    &lt;small&gt;2° Faixa&lt;/small&gt;
    &lt;div class=&quot;is-multiple&quot;&gt;
      
      &lt;select id=&quot;s2&quot; multiple=&quot;&quot; size=&quot;12&quot; onchange=&quot;updateValor(this,1);&quot;&gt;
        &lt;option selected=&quot;selected&quot; style=&quot;background-color: black; color: white;&quot; value=&quot;0&quot;&gt;Preto&lt;/option&gt;
        &lt;option style=&quot;background-color: brown; color: white;&quot; value=&quot;1&quot;&gt;Marrom&lt;/option&gt;
        &lt;option style=&quot;background-color: red; color: white;&quot; value=&quot;2&quot;&gt;Vermelho&lt;/option&gt;
        &lt;option style=&quot;background-color: orange; color: white;&quot; value=&quot;3&quot;&gt;Laranja&lt;/option&gt;
        &lt;option style=&quot;background-color: yellow; color: black;&quot; value=&quot;4&quot;&gt;Amarelo&lt;/option&gt;
        &lt;option style=&quot;background-color: green; color: black;&quot; value=&quot;5&quot;&gt;Verde&lt;/option&gt;
        &lt;option style=&quot;background-color: blue; color: white;&quot; value=&quot;6&quot;&gt;Azul&lt;/option&gt;
        &lt;option style=&quot;background-color: violet; color: black;&quot; value=&quot;7&quot;&gt;Violeta&lt;/option&gt;
        &lt;option style=&quot;background-color: gray; color: black;&quot; value=&quot;8&quot;&gt;Cinza&lt;/option&gt;
        &lt;option style=&quot;background-color: white; color: black;&quot; value=&quot;9&quot;&gt;Branco&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/div&gt;

      &lt;div class=&quot;control&quot;&gt;
      &lt;small&gt;3° Faixa&lt;/small&gt;
    &lt;div class=&quot;is-multiple&quot;&gt;
    
      &lt;select id=&quot;s3&quot; multiple=&quot;&quot; size=&quot;12&quot; onchange=&quot;updateValor(this,2);&quot;&gt;
        &lt;option style=&quot;background-color: black; color: white;&quot; value=&quot;1&quot;&gt;Preto&lt;/option&gt;
        &lt;option style=&quot;background-color: brown; color: white;&quot; value=&quot;10&quot;&gt;Marrom&lt;/option&gt;
        &lt;option selected=&quot;selected&quot; style=&quot;background-color: red; color: white;&quot; value=&quot;100&quot;&gt;Vermelho&lt;/option&gt;
        &lt;option style=&quot;background-color: orange; color: white;&quot; value=&quot;1000&quot;&gt;Laranja&lt;/option&gt;
        &lt;option style=&quot;background-color: yellow; color: black;&quot; value=&quot;10000&quot;&gt;Amarelo&lt;/option&gt;
        &lt;option style=&quot;background-color: green; color: black;&quot; value=&quot;100000&quot;&gt;Verde&lt;/option&gt;
        &lt;option style=&quot;background-color: blue; color: white;&quot; value=&quot;1000000&quot;&gt;Azul&lt;/option&gt;
        &lt;option style=&quot;background-color: gray; color: black;&quot; value=&quot;10000000&quot;&gt;Cinza&lt;/option&gt;
        &lt;option style=&quot;background-color: white; color: black;&quot; value=&quot;100000000&quot;&gt;Branco&lt;/option&gt;
        &lt;option style=&quot;background-color: gold;  color: black;&quot; value=&quot;0.1&quot;&gt;Ouro&lt;/option&gt;
        &lt;option style=&quot;background-color: silver; color: black;&quot; value=&quot;0.01&quot;&gt;Prata&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/div&gt;

      &lt;div class=&quot;control&quot;&gt;
      &lt;small&gt;4° Faixa&lt;/small&gt;
    &lt;div class=&quot;is-multiple&quot;&gt;    
      &lt;select id=&quot;s4&quot; multiple=&quot;&quot; size=&quot;12&quot; onchange=&quot;updateValor(this,3);&quot;&gt;
        &lt;option style=&quot;background-color: black; color: white;&quot; value=&quot;20&quot;&gt;Preto&lt;/option&gt;
        &lt;option style=&quot;background-color: brown; color: white;&quot; value=&quot;1&quot;&gt;Marrom&lt;/option&gt;
        &lt;option style=&quot;background-color: red; color: white;&quot; value=&quot;2&quot;&gt;Vermelho&lt;/option&gt;
        &lt;option style=&quot;background-color: orange; color: white;&quot; value=&quot;3&quot;&gt;Laranja&lt;/option&gt;
        &lt;option style=&quot;background-color: yellow; color: black;&quot; value=&quot;4&quot;&gt;Amarelo&lt;/option&gt;
        &lt;option style=&quot;background-color: green; color: black;&quot; value=&quot;5&quot;&gt;Verde&lt;/option&gt;
        &lt;option style=&quot;background-color: gray; color: black;&quot; value=&quot;8&quot;&gt;Cinza&lt;/option&gt;
        &lt;option style=&quot;background-color: white; color: black;&quot; value=&quot;10&quot;&gt;Branco&lt;/option&gt;
        &lt;option style=&quot;background-color: gold ;color: black;&quot; value=&quot;5&quot;&gt;Ouro&lt;/option&gt;
        &lt;option style=&quot;background-color: silver;  color: black;&quot; value=&quot;10&quot;&gt;Prata&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;section&quot;&gt;
  &lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Valor&lt;/th&gt;
    &lt;th&gt;Tolerância&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td id=&quot;valor&quot; class=&quot;subtitle&quot;&gt;&lt;/td&gt;
    &lt;td id=&quot;tolerancia&quot; class=&quot;subtitle&quot;&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt; 
&lt;/div&gt;

&lt;script&gt;



document.obj = $(&quot;obj&quot;);
document.obj.addEventListener(&quot;load&quot;,function(){
  var svg = document.obj.contentDocument;
  document.faixas = [svg.getElementById(&quot;rect1-6&quot;), svg.getElementById(&quot;rect3&quot;), svg.getElementById(&quot;rect2&quot;), svg.getElementById(&quot;rect1-6-3&quot;)];
  document.texto = svg.getElementById(&quot;tspan1&quot;);
},false);

&lt;/script&gt;

&lt;/div&gt;</content><author><name></name></author><category term="app" /><category term="eletrônica" /><category term="capacitores" /><category term="código de cores" /><summary type="html"></summary></entry><entry><title type="html">Órgãos Antigos dos Anos 70: Geradores e Divisores de Oitavas - Música Eletrônica</title><link href="http://0.0.0.0:4000/eletronica/2023/12/29/geradores-e-divisores-de-oitavas-org%C3%A3os-antigos.html" rel="alternate" type="text/html" title="Órgãos Antigos dos Anos 70: Geradores e Divisores de Oitavas - Música Eletrônica" /><published>2023-12-29T00:00:00-06:00</published><updated>2023-12-29T00:00:00-06:00</updated><id>http://0.0.0.0:4000/eletronica/2023/12/29/geradores-e-divisores-de-oitavas-org%C3%A3os-antigos</id><content type="html" xml:base="http://0.0.0.0:4000/eletronica/2023/12/29/geradores-e-divisores-de-oitavas-org%C3%A3os-antigos.html">&lt;h2 id=&quot;órgãos-antigos-dos-anos-70-geradores-e-divisores-de-oitavas&quot;&gt;Órgãos Antigos dos Anos 70: Geradores e Divisores de Oitavas&lt;/h2&gt;

&lt;p&gt;Os anos 70 foram uma época de efervescência musical e inovação tecnológica, e os órgãos eletrônicos desempenharam um papel crucial nesse cenário. Esses instrumentos, muitas vezes utilizados em bandas de rock progressivo, jazz fusion e música eletrônica da época, eram dotados de características sonoras únicas, inicialmente construidos com o objetivo de serem fiéis aos órgãos de tubos, sua sonoridade única e portabilidade logo achou seu lugar próprio na música.&lt;/p&gt;

&lt;h3 id=&quot;geradores-de-oitavas-a-base-do-som-único&quot;&gt;Geradores de Oitavas: A Base do Som Único&lt;/h3&gt;

&lt;p&gt;Os geradores de oitavas são circuitos eletrônicos projetados para gerar sinais de áudio em diferentes oitavas. No contexto desses instrumentos, os geradores de oitavas eram responsáveis por criar as frequências fundamentais e suas oitavas superiores e inferiores.&lt;/p&gt;

&lt;p&gt;Os órgãos antigos, como o lendário Hammond B3, utilizavam geradores de oitavas para produzir um som encorpado e cheio. A manipulação desses geradores nos &lt;strong&gt;Drawbars&lt;/strong&gt; permitia aos músicos criar timbres ricos e expressivos, tornando esses instrumentos essenciais para a música da década.&lt;/p&gt;

&lt;h3 id=&quot;divisores-de-oitavas-enfatizando-a-profundidade-sonora&quot;&gt;Divisores de Oitavas: Enfatizando a Profundidade Sonora&lt;/h3&gt;

&lt;p&gt;Em adição aos geradores de oitavas, os órgãos antigos dos anos 70 também contavam com divisores de oitavas. Esses dispositivos eram responsáveis por dividir o sinal gerado pelos osciladores em diferentes oitavas, permitindo uma abordagem mais versátil e dinâmica na criação de sons.&lt;/p&gt;

&lt;p&gt;Os divisores de oitavas eram particularmente notáveis pela forma como enriqueciam a paleta sonora dos músicos. Ao controlar a distribuição do sinal em oitavas específicas, os músicos podiam criar texturas sonoras complexas, empregando escalas e acordes de forma única. Isso proporcionava uma variedade de opções tonais, desde as profundezas ressonantes das oitavas mais baixas até as agudas e cristalinas oitavas superiores.&lt;/p&gt;

&lt;h3 id=&quot;o-par-de-chips-s50240-e-s10430&quot;&gt;O par de chips S50240 e S10430&lt;/h3&gt;

&lt;p&gt;Antes do advento de circuitos integrados especializados em geração e divisão de oitavas o processo de dividir as frequências das notas eram feitos com flip-flops discretos ou integrados. Os circuitos integrados &lt;strong&gt;S50240&lt;/strong&gt; e &lt;strong&gt;S10430&lt;/strong&gt; facilitaram a construção de órgãos eletrônicos polifônicos com o uso de apenas 2 ou três chips especializados.
O S50240 é o circuito integrado responsável por sintetizar as oitavas superiores do instrumento. Um oscilador tipicamente de 2Mhz será ligado na entrada e dividido em 12 frequências gerando 12 ondas quadradas com 50% de duty cycle correspondente a cada nota musical.
As divisões podem ser conferidas na tabela abaixo:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Divisão&lt;/th&gt;
      &lt;th&gt;Frequência resultante&lt;/th&gt;
      &lt;th&gt;Nota&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷478&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;4184.10 Hz&lt;/td&gt;
      &lt;td&gt;Dó inferior&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷451&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;4434.60 Hz&lt;/td&gt;
      &lt;td&gt;Dó sustenido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷426&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;4694.80 Hz&lt;/td&gt;
      &lt;td&gt;Ré&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷402&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;4975.10 Hz&lt;/td&gt;
      &lt;td&gt;Ré sustenido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷379&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;5277.80 Hz&lt;/td&gt;
      &lt;td&gt;Mi&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷358&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;5586.60 Hz&lt;/td&gt;
      &lt;td&gt;Fá&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷338&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;5917.20 Hz&lt;/td&gt;
      &lt;td&gt;Fá sustenido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷319&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;6269.60 Hz&lt;/td&gt;
      &lt;td&gt;Sol&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷301&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;6644.50 Hz&lt;/td&gt;
      &lt;td&gt;Sol sustenido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷284&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;7042.30 Hz&lt;/td&gt;
      &lt;td&gt;Lá&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷268&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;7462.70 Hz&lt;/td&gt;
      &lt;td&gt;Lá sustenido&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷253&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;7905.10 Hz&lt;/td&gt;
      &lt;td&gt;Si&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;÷239&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;8362.20 Hz&lt;/td&gt;
      &lt;td&gt;Dó superior&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;O S50240 sozinho nos permite apenas gerar 12 notas fundamentais. Para se obter as notas das oitavas inferiores dois S10430 são usados em conjunto com o S50240. Cada S10430 dividirá 4 notas em 4 oitavas e 2 notas em 3 oitavas totalizando por chip 22 teclas por chip e para se obter 44 teclas dois S10430 são usados em cascata. Cada divisor tem 4 saídas diferentes permitindo que com um potênciometro o músico possa misturar 4 oitavas da mesma nota nos níveis desejados alterando assim o timbre da nota. Além das 4 saídas as entradas das teclas no S10430 são sensíveis a tensão aplicada, permitindo a criação de efeitos de ataques e liberação das teclas, normalmente utilizando circuitos RC em cada tecla.&lt;/p&gt;

&lt;p&gt;O diagrama abaixo retirado do datasheet do S10430 ilustra facilmente essas ligações.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/S10430.png&quot; alt=&quot;Esquema do S50240 e S10430&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;outros-chips&quot;&gt;Outros chips&lt;/h3&gt;

&lt;p&gt;Esses chips são obsoletos e difíceis de se achar no mercado, porém não são os únicos a fazerem essa funções. Outras empresas lançaram no mercado outros chips muito conhecidos:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;13 Note Top Octave Synthetizer (TOS)&lt;/em&gt;&lt;/strong&gt;&lt;br /&gt;
50% Duty Cycle&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MO83B&lt;/li&gt;
  &lt;li&gt;M50240&lt;/li&gt;
  &lt;li&gt;M5891B1&lt;/li&gt;
  &lt;li&gt;S50240&lt;/li&gt;
  &lt;li&gt;50240&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;13 Note Top Octave Synthesizer (TOS)&lt;/strong&gt;&lt;br /&gt;
30% Duty Cycle&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MO82B&lt;/li&gt;
  &lt;li&gt;M50241&lt;/li&gt;
  &lt;li&gt;M5891A&lt;/li&gt;
  &lt;li&gt;S50241&lt;/li&gt;
  &lt;li&gt;50241&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;destaque grad-orange&quot;&gt;
&lt;p&gt;Qual a importância do Duty Cycle?&lt;/p&gt;
&lt;small&gt;Ter um duty cycle de 30% ou 50% influencia nos harmônicos gerados pela onda quadrada. O duty cycle de 50% gera harmônicos impares que para alguns gostos é mais ácido e agudo. Enquanto usar um duty cycle de 30% gera um forte harmônico par resultando em um timbre mais leve e macio. Alguns construtores alegam que um duty cycle de 25% é o melhor valor para gerar harmônicos pares.&lt;/small&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;12 Note Top Octave Synthesizer (TOS)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MO86B&lt;/li&gt;
  &lt;li&gt;M50242&lt;/li&gt;
  &lt;li&gt;S50242&lt;/li&gt;
  &lt;li&gt;50242&lt;/li&gt;
  &lt;li&gt;AY-1-0212&lt;/li&gt;
  &lt;li&gt;ECG-2043&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;12 Note Top Octave Synthesizer (TOS)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MO87B&lt;/li&gt;
  &lt;li&gt;MC86B1&lt;/li&gt;
  &lt;li&gt;ECG-2043&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Opções de substituição são poucas. O técnico dependerá de peças velhas. Alguns podem fazer seu próprio TOS utilizando FPGA ou algum microcontrolador rápido o suficiente para gerar 12 ondas quadradas sem desvio de fase. É importante se atentar que a maioria dos órgãos tem Vibrato quando se varia levemente a frequência do oscilador VCO de 2MHz.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;strong&gt;Fontes:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;http://www.armory.com&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;S50240 e S10430 Datasheets&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Wikipedia&lt;/em&gt;&lt;/p&gt;</content><author><name></name></author><category term="eletronica" /><category term="música eletrônica" /><category term="sintetizadores" /><summary type="html">Órgãos Antigos dos Anos 70: Geradores e Divisores de Oitavas</summary></entry><entry><title type="html">Criando seu próprio vocabulário BPE no Tokenizers - Python</title><link href="http://0.0.0.0:4000/aplicadas/2023/12/01/criando-seu-proprio-vocabulario-no.html" rel="alternate" type="text/html" title="Criando seu próprio vocabulário BPE no Tokenizers - Python" /><published>2023-12-01T00:00:00-06:00</published><updated>2023-12-01T00:00:00-06:00</updated><id>http://0.0.0.0:4000/aplicadas/2023/12/01/criando-seu-proprio-vocabulario-no-</id><content type="html" xml:base="http://0.0.0.0:4000/aplicadas/2023/12/01/criando-seu-proprio-vocabulario-no.html">&lt;h2 id=&quot;tokenização&quot;&gt;Tokenização&lt;/h2&gt;

&lt;p&gt;Ao longo da evolução das aplicações NLP várias formas de se representar um texto foram abordadas. Imagine a seguinte frase &lt;strong&gt;“Qual o sentido da vida?”&lt;/strong&gt; como deveríamos representa-lá para ser usada em algum Modelo de Linguagem Natural? Um modelo de linguagem ‘lê’ uma parte do texto e prevê o próximo token, então a primeira abordagem talvez seja óbvia: Atribuir um número a cada letra e usar a sequência de números para representar a frase. Boa notícia, não precisamos atribuir número algum, eles já existem na codificação UTF-8 como vemos abaixo:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Qual o sentido da vida?&lt;/td&gt;
      &lt;td&gt;0x51 0x75 0x61 0x6c 0x20 0x6f 0x20 0x73 0x65 0x6e 0x74 0x69 0x64 0x6f 0x20 0x64 0x61 0x20 0x76 0x69 0x64 0x61 0x3f&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Porém essa representação não funciona muito bem.  Na entrada de exemplo “Qual o sentido d” na codificação de letras sugerida o próximo token poderá ser o &lt;em&gt;“a”&lt;/em&gt;, &lt;em&gt;“e”&lt;/em&gt; e &lt;em&gt;“o”&lt;/em&gt; como nas frases &lt;em&gt;“Qual o sentido de …”&lt;/em&gt; e &lt;em&gt;“Qual o sentido do …”&lt;/em&gt; e porque não o &lt;em&gt;“i”&lt;/em&gt; em &lt;em&gt;“Qual o sentido disso …“&lt;/em&gt;, ou seja, a probabilidade do próximo token nessa codificação se diluí dificultando prever o próximo token. Imagine o espaço &lt;em&gt;” “&lt;/em&gt; ou o artigo &lt;em&gt;“a”&lt;/em&gt;, praticamente todas as letras/tokens tem a mesma probabilidade de ocorrerem depois deles.&lt;/p&gt;

&lt;p&gt;Outro problema é o contexto. As redes neurais vão perdendo o contexto ao longo das previsões e uma codificação como essa que precise de muitas iterações para formar uma frase fará a rede perder o ‘tema do assunto’.&lt;/p&gt;

&lt;p&gt;Outra forma sugerida para resolver esses problemas é atribuir um número as palavras (words) de um vocabulário como no exemplo abaixo:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Qual o sentido da vida?&lt;/td&gt;
      &lt;td&gt;0x13 0x03 0x123 0x10 0x54&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“Qual “&lt;/td&gt;
      &lt;td&gt;0x13&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“o “&lt;/td&gt;
      &lt;td&gt;0x03&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“sentido “&lt;/td&gt;
      &lt;td&gt;0x123&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“da “&lt;/td&gt;
      &lt;td&gt;0x10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“vida?”&lt;/td&gt;
      &lt;td&gt;0x54&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Na tabela acima cada palavra+pontuação tem um número associado. São 5 tokens então serão 5 números representando a frase toda. Nessa representação a rede neural faz poucas iterações e não se perde no contexto. De bônus ocupa pouco espaço e consome menos CPU correto? Sim. Mas alguns problemas surgem. Enquanto na representação por letras qualquer palavra do vocabulário pode ser representada, precisaríamos de uma enorme quantidade de números para representar todas as palavras existentes. Normalmente um vocabulário útil desses teria alguns Gigas de tamanho. E o que acontece se alguma palavra não conhecida aparecer? Há quem tenha usado o token &amp;lt;UNK&amp;gt; para representar uma palavra desconhecida … deselegante não?&lt;/p&gt;

&lt;h3 id=&quot;byte-pair-encoding-bpe&quot;&gt;Byte-Pair Encoding (BPE)&lt;/h3&gt;

&lt;p&gt;Usado inicialmente como um algoritmo para comprimir textos ele achou seu sucesso nos modelos de linguagens localizando-se no entre-meio da representação por letras e por palavras. Na codificação BPE inicialmente todas as letras são incluídas, depois uma pesquisa em uma grande quantidade de textos determinará as palavras e RADICAIS de palavras mais frequentemente usadas que serão incluídas na representação.&lt;/p&gt;

&lt;p&gt;Em português é extremamente comum o uso das preposições “do”, “da”, “em”; os artigos “um”, “uma”; os advérbios “não”, “sim”, “talvez”.&lt;/p&gt;

&lt;p&gt;Aprendemos na escola a formação das palavras com os prefixos, sufixos, radicais e outras formas, partindo disso, os prefixos “íssimo”,”an”, “anti”, “endo”, “hiper” bem como os sufixos “ismo”, “ença”, “ário” e tantos outros são fortes candidatos a serem representados pelo BPE. Por sorte nossa lingua tem radicais muito comuns que também podem ser incluídos na representação.&lt;/p&gt;

&lt;p&gt;Vejamos o exemplo da frase “Qual o sentido da vida?” na codificação BPE usada pelo GPT:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Token&lt;/th&gt;
      &lt;th&gt;Index&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;“Qual”&lt;/td&gt;
      &lt;td&gt;46181&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;” o”&lt;/td&gt;
      &lt;td&gt;267&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;” sent”&lt;/td&gt;
      &lt;td&gt;1908&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“ido”&lt;/td&gt;
      &lt;td&gt;17305&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;” da”&lt;/td&gt;
      &lt;td&gt;12379&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;” v”&lt;/td&gt;
      &lt;td&gt;410&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“ida”&lt;/td&gt;
      &lt;td&gt;3755&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;”?”&lt;/td&gt;
      &lt;td&gt;30&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Como se pode ver a palavra “sentido” foi quebrada em dois tokens “ sent” e “ido”, “vida” foi quebrado em “ v” e “ida”; faria mais sentido representar “vida” por “vida”? Sim, mas o vocabulário usado é do GPT-4 e apesar dele ser multilingual ele foi primariamente treinado para o inglês e com poucos textos em português, consequentemente ele tem mais radicais e palavras em inglês que em qualquer outra língua.&lt;/p&gt;

&lt;p&gt;Como todas a letras estão incluídas qualquer palavra pode ser formada e como os radicais e as palavras mais usadas estão incluídas o contexto fica pequeno. Há um balanço entre flexibilização e tamanho.&lt;/p&gt;

&lt;div class=&quot;destaque azul&quot;&gt;
&lt;p&gt;Se quiser explorar mais a tokenização usada pelo ChatGPT use o site &lt;a href=&quot;https://observablehq.com/@simonw/gpt-tokenizer&quot; target=&quot;_blank&quot;&gt;https://observablehq.com/@simonw/gpt-tokenizer&lt;/a&gt; exemplificado na imagem abaixo:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://observablehq.com/@simonw/gpt-tokenizer&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;/assets/imgs/Captura de tela de 2024-01-22 17-27-40.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;treinando-seu-próprio-vocabulário&quot;&gt;Treinando seu próprio vocabulário&lt;/h3&gt;

&lt;p&gt;Para treinar seu próprio vocabulário será necessário o módulo python &lt;strong&gt;tokenizers&lt;/strong&gt;. Primeiramente instale o módulo via pip ou usando seu gerenciador de pacotes ( preferido ).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install tokenizers
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Incluiremos os módulos necessários no cabeçalho do arquivo:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from tokenizers import Tokenizer, models, pre_tokenizers, decoders, trainers, processors
import glob
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O glob é excelente para essas tarefas ao facilitar adicionar novos arquivos simplesmente jogando eles em um diretório.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Initialize a tokenizer
tokenizer = Tokenizer(models.BPE())

# Customize pre-tokenization and decoding
tokenizer.pre_tokenizer = pre_tokenizers.ByteLevel(add_prefix_space=True)
tokenizer.decoder = decoders.ByteLevel()
tokenizer.post_processor = processors.ByteLevel(trim_offsets=True)

# And then train
trainer = trainers.BpeTrainer(
    vocab_size=32000,
    min_frequency=4,
    initial_alphabet=pre_tokenizers.ByteLevel.alphabet()
)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Inicializamos o módulo com os parâmetros desejados. Os parâmetros mais importantes são&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;vocab_size=32000&lt;/strong&gt; - Diz qual o tamanho do vocabulário. Muito pequeno ajuda na velocidade da rede mas diminui a quantidade de palavras e radicais. O GPT usa tamanhos de 50k (~50.000) e 100k (~100.000) para seus vocabulários. Não esqueça que as letras serão incluídas, então o tamanho deve contar essas letras obrigatórias.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;min_frequency=4&lt;/strong&gt; - Frequência minima para um token ser incluído. Se alguém fizer um treinamento com diálogos de internet é muito provável que palavras digitadas erradas apareçam e outras somente uma vez, ou os famigerados kkkkkkkkkk+. É melhor deixar palavras poucos usadas de fora. Porém se o vocab_size for pequeno e a quantidade de textos grande e com muitas palavras é provável que somente palavras com muita frequência sejam incluídas.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;initial_alphabet=pre_tokenizers.ByteLevel.alphabet()&lt;/strong&gt; - Lembra das letras automaticamente incluídas? Não é automático. Elas são incluídas aqui.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Como glob será usado …&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;l = glob.glob(&quot;./**/*.txt&quot;, recursive=True)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Que fará uma lista chamada “l” com todos os aquivos *.txt no diretório e sub-diretório atual.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;specials = [
    &apos;&amp;lt;|query|&amp;gt;&apos;,
    &apos;&amp;lt;|answer|&amp;gt;&apos;,
    &apos;&amp;lt;|endoftext|&amp;gt;&apos;,
    &apos;&amp;lt;|code|&amp;gt;&apos;,
    &apos;&amp;lt;|system|&amp;gt;&apos;,
    &apos;&amp;lt;|hole|&amp;gt;&apos;
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Essa etapa é importante.&lt;/strong&gt; A OpenAI usa muito o token &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;|endoftext|&amp;gt;&lt;/code&gt; para finalizar um texto e começar outro. Também é usado durante a inferência para informar que ela terminou. O token deve ser algo estranho aos textos das linguagens que ele suporta então foi escolhido esse formato estranho &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;|endoftext|&amp;gt;&lt;/code&gt;. Porém essa palavra tem 13 caracteres e ocuparia muito espaço bem como CPU para operá-la. Não seria melhor transformar esse token em um só número como é feito nas palavras e radicais mais usados?&lt;/p&gt;

&lt;p&gt;Pois é isso que é feito nessa fase. Adiciona-se os &lt;strong&gt;specials tokens&lt;/strong&gt; ou tokens especiais que serão usados para alguma finalidade.&lt;/p&gt;

&lt;div class=&quot;destaque azul&quot;&gt;
&lt;p&gt;Eu uso o &lt;strong&gt;&amp;lt;|query|&amp;gt;&lt;/strong&gt;, &lt;strong&gt;&amp;lt;|endoftext|&amp;gt;&lt;/strong&gt; e &lt;strong&gt;&amp;lt;|answer|&amp;gt;&lt;/strong&gt; para montar datasets com perguntas e respostas como no exemplo:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&amp;lt;|query|&amp;gt;Quem descobriu o Brasil?&amp;lt;|answer|&amp;gt;Pedro Álvares Cabral&amp;lt;|endoftext|&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;E o três tokens serão convertidos em um só número (cada) do que uma sequência de characteres.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Configurado os parâmetros agora é feito o processo de pesquisa e quando acabar o processo salvamos o *.json do vocabulário gerado para uso posterior.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;tokenizer.add_special_tokens(specials)
tokenizer.train(l, trainer=trainer)

# And Save it
tokenizer.save(&quot;byte-level-bpe.tokenizer.32k.json&quot;, pretty=True)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O arquivo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;byte-level-bpe.tokenizer.32k.json&lt;/code&gt; deverá aparecer no diretório atual ao final do processo com o vocabulário gerado.&lt;/p&gt;

&lt;h3 id=&quot;usando-o-vocabulário-gerado&quot;&gt;Usando o vocabulário gerado&lt;/h3&gt;

&lt;p&gt;Para carregar o arquivo o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;from_file&lt;/code&gt; do Tokenizer é usado. 
Para transformar um texto em números usa-se o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tokenizer.encode(texto)&lt;/code&gt; que retornará na lista &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ids&lt;/code&gt;.
Para transformar uma sequência de números em texto novamente o &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;decode&lt;/code&gt; é usado.
Como se pode ver no exemplo abaixo:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import tokenizers
from tokenizers import Tokenizer
from tokenizers.models import BPE
tokenizer = Tokenizer.from_file(&quot;byte-level-bpe.tokenizer.32k.json&quot;)
encode = lambda s: tokenizer.encode(s).ids
decode = lambda l: tokenizer.decode(l)

A = encode(&quot;Qual o sentido da vida?&quot;)
B = decode(A)

print(A,B)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;programa-completo&quot;&gt;Programa completo&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;from tokenizers import Tokenizer, models, pre_tokenizers, decoders, trainers, processors
import glob
# Initialize a tokenizer
tokenizer = Tokenizer(models.BPE())

# Customize pre-tokenization and decoding
tokenizer.pre_tokenizer = pre_tokenizers.ByteLevel(add_prefix_space=True)
tokenizer.decoder = decoders.ByteLevel()
tokenizer.post_processor = processors.ByteLevel(trim_offsets=True)

# And then train
trainer = trainers.BpeTrainer(
    vocab_size=32000,
    min_frequency=4,
    initial_alphabet=pre_tokenizers.ByteLevel.alphabet()
)

l = glob.glob(&quot;./**/*.txt&quot;, recursive=True)

specials = [
    &apos;&amp;lt;|query|&amp;gt;&apos;,
    &apos;&amp;lt;|answer|&amp;gt;&apos;,
    &apos;&amp;lt;|endoftext|&amp;gt;&apos;,
    &apos;&amp;lt;|code|&amp;gt;&apos;,
    &apos;&amp;lt;|system|&amp;gt;&apos;,
    &apos;&amp;lt;|hole|&amp;gt;&apos;
]

tokenizer.add_special_tokens(specials)
tokenizer.train(l, trainer=trainer)

# And Save it
tokenizer.save(&quot;byte-level-bpe.tokenizer.32k.json&quot;, pretty=True)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name></name></author><category term="aplicadas" /><category term="python" /><category term="IA" /><category term="tokenizers" /><category term="llm" /><summary type="html">Tokenização</summary></entry><entry><title type="html">Siglas de sensores e atuadores OBD2 - Eletrônica automotiva</title><link href="http://0.0.0.0:4000/eletronica/2023/11/15/siglas-de-sensores-obd2.html" rel="alternate" type="text/html" title="Siglas de sensores e atuadores OBD2 - Eletrônica automotiva" /><published>2023-11-15T19:26:05-06:00</published><updated>2023-11-15T19:26:05-06:00</updated><id>http://0.0.0.0:4000/eletronica/2023/11/15/siglas-de-sensores-obd2</id><content type="html" xml:base="http://0.0.0.0:4000/eletronica/2023/11/15/siglas-de-sensores-obd2.html">&lt;h3 id=&quot;se-você-tem-um-leitor-obd2-em-inglês-essa-lista-pode-te-ajudar-a-desvendar-as-siglas-na-leitura&quot;&gt;Se você tem um leitor OBD2 em inglês essa lista pode te ajudar a desvendar as siglas na leitura.&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Informação exibida&lt;/th&gt;
      &lt;th&gt;Explicação&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Fuel System 1 Status [Status 1 ou Fuelsys1]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Em sistema de controle &lt;strong&gt;OL - Open Loop&lt;/strong&gt; significa que o controle está sendo feito as ‘cegas’, sem o uso dos sensores. Em modo &lt;strong&gt;CL - Closed Loop&lt;/strong&gt; o controle está sendo feito utilizando os sensores. A sonda lambda é o principal sensor utilizado para controlar a mistura ar-combustível e para funcionar ela precisa estar quente.Ao ligar o carro com o motor frio a sonda lambda (fria) não será utilizada de início, então a ECU operará o motor em modo OL - Open Loop até que a sonda lambda envie os dados corretos quando finalmente a ECU (agora com valores corretos dos sensores já aquecidos) muda para Closed Loop.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Calculated Load Value [CLV or Load_PCT]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Carga do motor.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Engine Coolant Temp [ECT]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Temperatura do liquido de arrefecimento (água do radiador).&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Short Term Fuel Trim-Bank 1 [STFT 1 ou SHRTFT1]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Ajuste imediato da mistura estequiometria. Se o valor é positivo a ECU está adicionando combustível (mistura rica) se negativo a ECU está retirando combustível (mistura pobre). Esse ajuste se perde ao desligar o carro. Quando se está ‘descendo na banguela’, por exemplo, com o carro engatado a ECU para de mandar combustível mostrando valores negativos para STFT.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Long Term Fuel Trim- Bank 1 [LTFT 1 ou LONGFT1]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Ajuste de longo prazo da mistura com base no histórico do sensor explicado acima. Se por exemplo o sensor imediato ficar por muito tempo em 6% o Long Term Fuel Trim irá incrementar seu ajuste para compensar até que o Short Term fique em 0%. Esse ajuste não se perde ao desligar o carro, é um dos indicadores mais importantes de falhas no motor.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Engine RPM [RPM]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;O RPM do motor&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Vehicle Speed Sensor [VSS]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Velocidade do veiculo&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Ignition Timing Advance #1 [Sparkadv]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Mostra o ângulo de ignição ou mais conhecido como “ponto de ignição”. Diminui com o aumento da temperatura.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Intake Air Temp [IAT]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Temperatura do ar.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Air Flow Rate from Mass Air Flow Sensor [MAF]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;A quantidade de ar entrando no sistema de admissão. Em geral está associado ao sensor MAF.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Absolute Throttle Position [TP or ABS_TP]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Posição do sensor de corpo de borboleta. Ao pisar no pedal do acelerador esse sinal deve subir.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Bank 1 – Sensor 2 Volts [O2S12]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Tensão da sonda lambda pós catalisador. Em situações normais não deve variar.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Bank 1 – Sensor 1 [O2S11]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Tensão da sonda lambda antes do catalisador. No osciloscópio se apresenta como uma onda oscilante entre 900mV e 200mV. Valores acima de 450mV indica mistura rica e valores abaixo mistura pobre. O sinal não deve ser contínuo, mas oscilante. O ideal é oscilar simetricamente em mistura pobre e rica, se ficar por mais tempo acima ou abaixo de 450mV possivelmente é sinal de problemas.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;OBD Requirements OBD and OBD2 [OBDSUP]&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;O protocolo de comunicação utilizado pelo OBD&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name></name></author><category term="eletronica" /><category term="obd2" /><summary type="html">Se você tem um leitor OBD2 em inglês essa lista pode te ajudar a desvendar as siglas na leitura.</summary></entry><entry><title type="html">O problema dual e primal - Otimização Matemática</title><link href="http://0.0.0.0:4000/aplicadas/2023/01/10/problema-dual-primal.html" rel="alternate" type="text/html" title="O problema dual e primal - Otimização Matemática" /><published>2023-01-10T00:00:00-06:00</published><updated>2023-01-10T00:00:00-06:00</updated><id>http://0.0.0.0:4000/aplicadas/2023/01/10/problema-dual-primal</id><content type="html" xml:base="http://0.0.0.0:4000/aplicadas/2023/01/10/problema-dual-primal.html">&lt;p&gt;Os &lt;strong&gt;problemas primal&lt;/strong&gt; e &lt;strong&gt;dual&lt;/strong&gt; estão intrinsecamente ligados na teoria da dualidade em &lt;strong&gt;programação linear&lt;/strong&gt;. Eles representam duas formulações diferentes de um mesmo problema de otimização linear, sendo inter-relacionados de maneira específica.&lt;/p&gt;

&lt;h3 id=&quot;problema-primal&quot;&gt;Problema Primal&lt;/h3&gt;

&lt;p&gt;O problema primal é a formulação original do problema de otimização linear. Geralmente, é expresso na forma padrão:&lt;/p&gt;

&lt;p&gt;\[\text{Maximize } \quad c^Tx\]
\[\text{sujeito a } \quad Ax \leq b\]
\[x \geq 0\]&lt;/p&gt;

&lt;p&gt;onde:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$c$ é um vetor de coeficientes da função objetivo,&lt;/li&gt;
  &lt;li&gt;$x$ é o vetor de variáveis de decisão,&lt;/li&gt;
  &lt;li&gt;$A$ é uma matriz de coeficientes das restrições,&lt;/li&gt;
  &lt;li&gt;$b$ é o vetor de limites das restrições.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A meta é maximizar ou minimizar a função objetivo $c^Tx$ sujeita a um conjunto de restrições lineares.&lt;/p&gt;

&lt;h3 id=&quot;problema-dual&quot;&gt;Problema Dual&lt;/h3&gt;

&lt;p&gt;O problema dual é uma formulação alternativa derivada do problema primal usando a teoria de dualidade. Introduz-se multiplicadores de Lagrange para as restrições do problema primal, gerando assim o problema dual. A formulação geral do problema dual é:&lt;/p&gt;

&lt;p&gt;\[\text{Minimize } \quad b^Ty\]
\[\text{sujeito a } \quad A^Ty \geq c\]
\[y \geq 0\]&lt;/p&gt;

&lt;p&gt;onde:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$y$ é o vetor de multiplicadores de Lagrange (ou variáveis duais),&lt;/li&gt;
  &lt;li&gt;$b$ é o vetor de termos constantes das restrições do primal,&lt;/li&gt;
  &lt;li&gt;$A^T$ é a matriz transposta de $A$,&lt;/li&gt;
  &lt;li&gt;$c$ é o vetor de coeficientes da função objetivo do primal.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;O objetivo do problema dual é encontrar os multiplicadores de Lagrange que minimizam $b^Ty$ sujeito às restrições lineares.&lt;/p&gt;

&lt;h3 id=&quot;relação-de-dualidade&quot;&gt;Relação de Dualidade&lt;/h3&gt;

&lt;p&gt;A relação fundamental entre os problemas primal e dual é expressa pelo Teorema da Dualidade, que estabelece que o valor ótimo do problema primal é sempre maior ou igual ao valor ótimo do problema dual, e vice-versa. Matematicamente, isso é expresso como:&lt;/p&gt;

&lt;p&gt;\[\text{Para todo } x \text{ factível no primal e para todo } y \text{ factível no dual, temos } c^Tx \geq b^Ty\]&lt;/p&gt;

&lt;p&gt;Se ambos os problemas alcançam seus valores ótimos, então há igualdade entre eles. Esta relação é conhecida como dualidade forte.&lt;/p&gt;

&lt;p&gt;A dualidade não apenas fornece uma maneira de verificar a solução ótima, mas também oferece informações valiosas sobre a sensibilidade do problema às mudanças nos parâmetros e fornece soluções alternativas.&lt;/p&gt;</content><author><name></name></author><category term="aplicadas" /><category term="programação linear" /><category term="otimização" /><category term="pesquisa operacional" /><summary type="html">Os problemas primal e dual estão intrinsecamente ligados na teoria da dualidade em programação linear. Eles representam duas formulações diferentes de um mesmo problema de otimização linear, sendo inter-relacionados de maneira específica.</summary></entry><entry><title type="html">Usando os serviços OpenAI para criar um ChatBot - Python</title><link href="http://0.0.0.0:4000/python/2023/01/02/usando-servicos-openai.html" rel="alternate" type="text/html" title="Usando os serviços OpenAI para criar um ChatBot - Python" /><published>2023-01-02T00:00:00-06:00</published><updated>2023-01-02T00:00:00-06:00</updated><id>http://0.0.0.0:4000/python/2023/01/02/usando-servicos-openai</id><content type="html" xml:base="http://0.0.0.0:4000/python/2023/01/02/usando-servicos-openai.html">&lt;p&gt;Em 2023 Taylor Swift foi eleita a personalidade do ano, mas há quem diga que 2023 foi mesmo o ano da &lt;strong&gt;Inteligência Artificial&lt;/strong&gt;. E de fato há uma corrida das empresas que ficaram para trás do lançamento do modelo  &lt;strong&gt;text-davinci&lt;/strong&gt; da OpenAI,era um modelo rudimentar comparado aos &lt;strong&gt;gpt-turbo-3.5&lt;/strong&gt; e o &lt;strong&gt;gpt-4&lt;/strong&gt; usados hoje, mas fez barulho e mexeu no mercado. Quem se lembra que o lançamento ocorreu quando o mundo ainda estava assutado com a COVID-19 e a Guerra na Ulcrânia, tudo isso acontecia e assustava, mas as atenções e esperanças estavam mesmo para o futuro que já que tinha chegado. O Google lançou o Bard mas não impressionou. A Baidu lançou seu modelo porém restrito ainda a sua área, enquanto a Amazon e a Apple correm atrás do prejuízo. Elon Musk lançou o Grok&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, mas até o momento tinha fila de espera para usar. A Apple tenta negociar um acordo milionário para poder usar os artigos da imprensa americana para seu modelo de linguagem&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;. A Microsoft foi astuta e financiou a OpenAI quando percebeu o potencial do &lt;strong&gt;GPT-2&lt;/strong&gt; e hoje oferece os modernos modelos como serviço pago ou gratuito.&lt;/p&gt;

&lt;h3 id=&quot;fazendo-um-chatbot-usando-o-openai&quot;&gt;Fazendo um chatbot usando o OpenAI&lt;/h3&gt;

&lt;p&gt;Fazer um chatbot usando os serviços da OpenAI é simples, usa-se somente UMA chamada de função do módulo da openai em python.&lt;/p&gt;
&lt;h4 id=&quot;cadastro-e-criação-da-secret-key&quot;&gt;Cadastro e criação da Secret Key&lt;/h4&gt;
&lt;p&gt;Primeiro é preciso fazer o cadastro na plataforma de serviço OpenAI API no site &lt;a href=&quot;https://platform.openai.com/signup&quot;&gt;https://platform.openai.com/signup&lt;/a&gt;. Até o momento eles oferecem créditos para avaliação do serviço e não é preciso cartão de crédito para usar esses créditos. Entretanto a avaliação fica restrista ao modelo &lt;strong&gt;gpt-3.5-turbo&lt;/strong&gt; que não deixa de ser um modelo capaz e poderoso. Se você usa a versão gratuita do site você usa esse modelo.&lt;/p&gt;

&lt;p&gt;Feito o cadastro é preciso gerar a OpenAI KEY para que se possa usar os serviços.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/openaikey.png&quot; alt=&quot;Página para criar a Secret Key da OpenAI&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Clique em “&lt;strong&gt;Create new Secret Key&lt;/strong&gt;” para criar sua Secret Key, como visto na figura acima.&lt;/p&gt;

&lt;h4 id=&quot;instalação-do-módulo-de-acesso&quot;&gt;Instalação do módulo de acesso&lt;/h4&gt;
&lt;p&gt;Em seguida é necessário instalar o módulo da openai. Isso pode ser feito pelo PIP ou preferencialmente pelo seu gerenciador de pacotes em sua distribuição Linux.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;pip install openai&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;fazendo-sua-primeira-conversa&quot;&gt;Fazendo sua primeira conversa&lt;/h4&gt;

&lt;p&gt;Finalmente podemos fazer a primeira chamada para a OpenAI. Primeiramente é preciso criar uma instância OpenAI usando sua SECRET_KEY do passo anterior. Para fazer uma requisição usa-se o &lt;strong&gt;chat.completions.create&lt;/strong&gt; como visto no código abaixo:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
# Importa o módulo OpenAI instalado com pip anteriormente
from openai import OpenAI
# Cria uma instância OpenAI. Utilize aqui sua Secret Key no lugar de SUA_SECRET_KEY ( entre aspas )
client = OpenAI(SUA_SECRET_KEY)

# Finalmente fazemos uma requisição ao serviço de chat
completion = client.chat.completions.create(
model=&quot;gpt-3.5-turbo&quot;,  # Modelo usado.
# A personalidade e o texto enviado ao chat.
messages=[
    {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Você é um assistente virtual divertido e bem humorado.&quot;},
    {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Qual o sentido da vida?&quot;}
]
)

# E finalmente exibimos a resposta do modelo &quot;gpt-3.5-turbo&quot; a questão &quot;Qual o sentido da vida?&quot;
print(completion.choices[0].message)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&quot;personalizando-e-embutindo-informações&quot;&gt;Personalizando e embutindo informações&lt;/h4&gt;
&lt;p&gt;Basicamente é só isso. Configura a Key e chama os serviço de complementação de texto &lt;strong&gt;completions.create&lt;/strong&gt; com a personalidade e a mensagem. Fácil não?!&lt;/p&gt;

&lt;p&gt;Agora é uma boa hora para explicar os roles da requisição. Como se pode ver no código temos uma &lt;em&gt;list&lt;/em&gt; com duas &lt;em&gt;dict&lt;/em&gt; com as chaves “role” e “content”. Essas informações serão enviadas ao modelo para configurá-lo com a personalidade e informações que se deseja.&lt;/p&gt;

&lt;h5 id=&quot;role-system&quot;&gt;Role System&lt;/h5&gt;

&lt;p&gt;O role system é o mais forte e determina a personalidade do assistente. Veja alguns exemplos de role system:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;“Você é uma IA da empresa Octopus S.A.. A Empresa está localizada no endereço X e tem o telefone Y.”&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;“Você é um bot do telegram divertido e bem humorado. Sua personalidade é ácida e irônica”&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;“Você é um assistente virtual no twitch do Gamer Lucão, você adora Minecraft e Playstation 5”&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Esse role é opcional. Não é preciso enviar nada se não quiser.&lt;/p&gt;

&lt;h5 id=&quot;role-assistant&quot;&gt;Role Assistant&lt;/h5&gt;

&lt;p&gt;O role assistant é útil para enviar a conversa anterior e informações relevantes. Em geral usa-se formatação de strings no python para embutir informações e o texto anterior. Veja alguns exemplos:&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;EXPEDIENTE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;estamos abertos até as 18:00hrs&quot;&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;role&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;system&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sa&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hoje é &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; e hoje &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EXPEDIENTE&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;REQ_ANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Onde compro o Dipirona?&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;RESP_ANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Olá, Você pode comprar na farmácia ...&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;role&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;system&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sa&quot;&gt;F&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Anteriormente o usuário solicitou &apos;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;REQ_ANT&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos; e você respondeu &apos;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RESP_ANT&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;role-user&quot;&gt;Role User&lt;/h5&gt;

&lt;p&gt;O role user é onde as mensagens do usuário serão inseridas. No exemplo acima foi a mensagem “Qual o sentido da vida?”.&lt;/p&gt;

&lt;h3 id=&quot;limitações&quot;&gt;Limitações&lt;/h3&gt;

&lt;p&gt;Cada requisição é única e não tem memória. Ele não se lembra das requisições anteriores. Para que o modelo saiba o que foi dito anteriormente e ele possa continuar a conversa o histórico deve ser passado no role assistant.
Também há um limite de informações que pode ser colocado nos roles. O conjunto dos roles é chamado &lt;strong&gt;contexto&lt;/strong&gt;.  O limite do contexto é dado em tokens e atualmente é 4096 tokens, mas há modelos que tem 16k tokens.&lt;/p&gt;

&lt;p&gt;Tokens podem ser uma letra ou uma palavra inteira, depende do vocabulário usado pelo modelo. Não conte as letras para verificar o limite de tokens, pois como dito, os tokens podem ser uma letra ou um pedaço de uma palavra ou uma palavra inteira.&lt;/p&gt;

&lt;p&gt;Os modelos tem controle de conversas tóxicas, ilegais, abusivas e temas sensíveis. Não peça para o modelo contar um conto erótico que dificilmente ele o fará. Também não é possível inventar histórias mentirosas de pessoas ou temas sensíveis. O modelo tem personalidade multicultural, feminista e woke.&lt;/p&gt;

&lt;p&gt;Quando acabar seus créditos só será possível continuar requisitando com um cartão de crédito onde será cobrado por tokens. Não é muito, você brincando sozinho consumirá menos de \$ 1,00 ou em uso mais intensivo \$ 5,00. Você pode configurar um limite no site para no caso de passar desse valor ele pare de responder as requisições.&lt;/p&gt;

&lt;h3 id=&quot;empresas&quot;&gt;Empresas&lt;/h3&gt;

&lt;p&gt;Algumas observações são importantes quando for usar o chatbot em empresas. Vamos imaginar um cenário onde o chatbot deverá ser usado para consultar um grande banco de dados de produtos e como se percebeu a limitação do contexto (os roles system, assistant e user) não tem como colocar todos os produtos e suas caracteristicas no contexto da requisição, isso é impraticável.&lt;/p&gt;

&lt;p&gt;Para que uma grande base de dados seja ‘ligada’ ao chatbot deverá ser usado um &lt;em&gt;Langchain&lt;/em&gt; ou um &lt;em&gt;Information Extration&lt;/em&gt;.
O &lt;em&gt;Langchain&lt;/em&gt; usa duas camadas. A primeira etapa é a indexação da base de dados que você quer disponibilizar ao chatbot. Nesta etapa documentos, pdfs, textos, planilhas são indexadas por um &lt;em&gt;modelo de embedded&lt;/em&gt; que gerará um grande vetor de números de ponto flutuante. Esse vetor representará uma sentença do texto e será armazenado em um banco de dados vetorial ( Vector Database ).&lt;/p&gt;

&lt;p&gt;Quando o usuário fizer uma requisição a requisição irá novamente para esse modelo embedded que gerará um vetor embedded representando a requisição e o banco de dados será consultado com o valor que mais se aproxima do vetor da requisição.
Encontrado a informação, a informação é retornada para o chatbot para ele gerar uma resposta com a informação obtida do banco de dados.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Exemplo:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Um escritório de advocacia quer um chatbot ajudando seus advogados.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Primeira etapa ( pode ser feita somente uma vez ):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Reunir todos os documentos, leis, sentenças e diário oficiais que achar necessário.&lt;/li&gt;
  &lt;li&gt;Extrair as sentenças ( por exemplo fazendo um &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.split(&quot;.&quot;)&lt;/code&gt; no texto ).&lt;/li&gt;
  &lt;li&gt;Gerar um vetor embedded para cada sentença.&lt;/li&gt;
  &lt;li&gt;Amazenar os vetores embedded em um banco de dados vetorial.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Segunda etapa (a cada requisição ):&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;O usuário digita uma requisição por exemplo &lt;em&gt;“O Sr. Antonio de oliveira tem algum processo cível?”&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;O modelo embedded gera um vetor com o texto da requisição.&lt;/li&gt;
  &lt;li&gt;O banco de dados é consultado com esse vetor para achar a sentença mais próxima.&lt;/li&gt;
  &lt;li&gt;Ele achou por exemplo &lt;em&gt;“Antonio de oliveira x José no nascimento”&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;A informação é adicionada ao role assistant para o chatbot gerar uma resposta.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;O Information Extration é diferente este não usa um modelo embedded. Ele extrai a intenção do usuário e as palavras chaves que serão usados para montar diretamente uma requisição SQL ao banco de dados que então retornará a informação a ser inserida nos roles da requisição da resposta.&lt;/p&gt;

&lt;p&gt;Langchain e Information Extraction são áreas e ferramentas diferentes mas auxiliares do modelos de linguagem. A OpenAI e outras empresas disponibilizam esses serviços pagos.&lt;/p&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://grok.x.ai/&quot;&gt;https://grok.x.ai/&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://www.nytimes.com/2023/12/22/technology/apple-ai-news-publishers.html&quot;&gt;https://www.nytimes.com/2023/12/22/technology/apple-ai-news-publishers.html&lt;/a&gt; &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name></name></author><category term="python" /><category term="AI" /><category term="ChatGPT" /><category term="python" /><summary type="html">Em 2023 Taylor Swift foi eleita a personalidade do ano, mas há quem diga que 2023 foi mesmo o ano da Inteligência Artificial. E de fato há uma corrida das empresas que ficaram para trás do lançamento do modelo text-davinci da OpenAI,era um modelo rudimentar comparado aos gpt-turbo-3.5 e o gpt-4 usados hoje, mas fez barulho e mexeu no mercado. Quem se lembra que o lançamento ocorreu quando o mundo ainda estava assutado com a COVID-19 e a Guerra na Ulcrânia, tudo isso acontecia e assustava, mas as atenções e esperanças estavam mesmo para o futuro que já que tinha chegado. O Google lançou o Bard mas não impressionou. A Baidu lançou seu modelo porém restrito ainda a sua área, enquanto a Amazon e a Apple correm atrás do prejuízo. Elon Musk lançou o Grok1, mas até o momento tinha fila de espera para usar. A Apple tenta negociar um acordo milionário para poder usar os artigos da imprensa americana para seu modelo de linguagem2. A Microsoft foi astuta e financiou a OpenAI quando percebeu o potencial do GPT-2 e hoje oferece os modernos modelos como serviço pago ou gratuito. https://grok.x.ai/ &amp;#8617; https://www.nytimes.com/2023/12/22/technology/apple-ai-news-publishers.html &amp;#8617;</summary></entry><entry><title type="html">Usando CVXPY para o problema da mochila (knapsack) - Otimização</title><link href="http://0.0.0.0:4000/aplicadas/2022/10/20/cvpy-knapsack.html" rel="alternate" type="text/html" title="Usando CVXPY para o problema da mochila (knapsack) - Otimização" /><published>2022-10-20T20:26:05-05:00</published><updated>2022-10-20T20:26:05-05:00</updated><id>http://0.0.0.0:4000/aplicadas/2022/10/20/cvpy-knapsack</id><content type="html" xml:base="http://0.0.0.0:4000/aplicadas/2022/10/20/cvpy-knapsack.html">&lt;p&gt;O problema da mochila ou em inglês “knapsack” é um problema clássico de otimização combinatória.&lt;/p&gt;

&lt;p&gt;O problema consiste em colocar em uma mochila o maior valor possível de itens com determinada capacidade de peso. A cada item é associado um peso e um valor. O valor pode ser a utilidade ou o preço. Ao ir para o camping espera-se que a mochila seja carregada da maior utilidade de itens possível, enquanto na mochila de um motoqueiro o desejado é transportar o maior valor possível. Dessa forma, o objetivo da otimização é ter o maior valor dentro da mochila, ou seja, maximizar o valor sem ultrapassar o peso. Alguns itens podem ser muito valiosos porém pesados, enquantos alguns itens leves podem ter valor pequeno. Um algoritmo trivial de otimização irá na tentativa e erro colocar itens na mochila até alcançar o peso permitido e ir trocando os itens procurando sempre maximizar o valor dentro da mochila.&lt;/p&gt;

&lt;p&gt;Esse problema é generalizado para outras aplicações onde o peso pode ser qualquer variável de penalidade e o preço uma variável de maximização. Exemplos não faltam:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Embarcar a maior quantidade de itens possíveis em um caminhão com custo de carga alto&lt;/li&gt;
  &lt;li&gt;Alocar máquinas de produção visando o menor tempo possível e maior valor produzido&lt;/li&gt;
  &lt;li&gt;Corte de chapas de madeira, metal, tecidos&lt;/li&gt;
  &lt;li&gt;Empacotamento&lt;/li&gt;
  &lt;li&gt;Investimento de Capital&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;cvxpy&quot;&gt;CVXPY&lt;/h4&gt;

&lt;p&gt;CVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy.&lt;/p&gt;

&lt;p&gt;Para instalar o CVXPY use o pip:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install cvxpy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Um dos otimizadores disponíveis é o CBC  um otimizador de programação linear inteiro open-source. O CBC pode ser usado em linha de comando sem ser necessário o CVXPY, mas neste caso será necessário aprender sua linguagem de entrada. &lt;/p&gt;

&lt;p&gt;Também será necessário instalar o CVXOPT:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install cvxopt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Esse problema aparece em diversas áreas como a logística, computação e investimentos.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import cvxpy as cp
import numpy as np
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;dados-de-entrada-do-problema&quot;&gt;Dados de entrada do problema&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Valores = np.array([10,13,1,100,45,13,156,76,4,59,97,99])
Pesos = np.array([50,55,10,5,1,98,34,3,9,3,7,19])
Capacidade_Mochila = 100
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;variaveis-de-decisão&quot;&gt;Variaveis de decisão&lt;/h4&gt;

&lt;p&gt;Cada Item Xi terá valor 1 se estiver na mochila ou 0 se estiver fora cp.Variable cria uma variável no CVX ( não confunda cp com np ) do tipo boolean do tamanho da quantidade de itens&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Xi = cp.Variable((Valores.size), boolean = True)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;constraints-do-problema&quot;&gt;Constraints do problema&lt;/h4&gt;

&lt;p&gt;A soma total dos pesos dos itens escolhidos por Xi devem ser igual ou menor que a capacidade da mochila                &lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;constraints = [ Xi @ Pesos &amp;lt;= Capacidade_Mochila ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tambem pode ser escrito com o mesmo resultado como:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;constraints = [ cp.sum( cp.multiply (Xi, Pesos ) ) &amp;lt;= Capacidade_Mochila ]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O Objetivo do problema é maximizar os valores na mochila&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;objective = cp.Maximize( Xi @ Valores )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;finalmente chamamos o solver com verbose para acompanhar 
o progresso e a execução máxima de 1hr&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;prob = cp.Problem(objective, constraints)
prob.solve(solver=cp.CBC,verbose=True, maximumSeconds = 1 * 60 * 60) 
print(&quot;Status          : &quot;, prob.status)
print(&quot;Valor encontrado: &quot;, prob.value)
print(&quot;Valor de Xi     : &quot;, Xi.value)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;O problema da mochila tem muitas aplicações práticas principalmente na logística. Imagine uma transportadora que precisa distribuir seus pacotes utilizando vans e caminhões. Cada pacote tem peso, tamanho, localidade, tempo de espera e valor. Um programa de otimização pode ajudar no preenchimento dos caminhões e em aplicações profissionais traçar a rota de distribuição de cada veículo.&lt;/p&gt;

&lt;p&gt;Programas de otimização não acham o &lt;strong&gt;melhor&lt;/strong&gt; valor, porque em geral é uma tarefa impossível (o mais correto seria improvável) de se achar, devido a explosão combinatória. Por isso são chamados ‘otimizadores’ pois eles buscam a melhor solução possível, ou seja, uma &lt;strong&gt;solução ótima&lt;/strong&gt;.&lt;/p&gt;</content><author><name></name></author><category term="aplicadas" /><category term="python" /><category term="otimização" /><category term="CVXPY" /><summary type="html">O problema da mochila ou em inglês “knapsack” é um problema clássico de otimização combinatória.</summary></entry><entry><title type="html">Probabilidade clássica frequentista e subjetiva - Matemática</title><link href="http://0.0.0.0:4000/aplicadas/2022/08/02/probabilidade-classica-frequentista-e-subjetiva.html" rel="alternate" type="text/html" title="Probabilidade clássica frequentista e subjetiva - Matemática" /><published>2022-08-02T00:00:00-05:00</published><updated>2022-08-02T00:00:00-05:00</updated><id>http://0.0.0.0:4000/aplicadas/2022/08/02/probabilidade-classica-frequentista-e-subjetiva</id><content type="html" xml:base="http://0.0.0.0:4000/aplicadas/2022/08/02/probabilidade-classica-frequentista-e-subjetiva.html">&lt;h2 id=&quot;todas-as-coisas-são-números&quot;&gt;Todas as coisas são números.&lt;/h2&gt;
&lt;h5 id=&quot;transformando-idéias-e-sensações-em-números&quot;&gt;Transformando idéias e sensações em números&lt;/h5&gt;

&lt;p&gt;O mundo não é &lt;strong&gt;determinístico&lt;/strong&gt; para &lt;em&gt;nós&lt;/em&gt;. Não temos as fórmulas, as regras, as leis, ou a onisciência de saber &lt;strong&gt;quando&lt;/strong&gt;, &lt;strong&gt;quanto&lt;/strong&gt; e &lt;strong&gt;se&lt;/strong&gt; a coisas acontecerão no futuro, entretanto ainda conseguimos perceber que alguns eventos são mais prováveis de ocorrer que outros; sabemos naturalmente que em céu nublado é mais provável de chover do que em céu limpo, que ganhar na loteria é mais improvável que ganhar em um jogo de cartas.&lt;/p&gt;

&lt;p&gt;Porém confiar somente nas vagas sensações de que algo acontecerá poderia trazer prejuízos enormes. Os egipicios buscavam prever as cheias do Rio Nilo para não passarem fome, investidores precisam medir a viabilidade de um negócio novo, transportadoras e agências de seguros não sobrevivem sem mensurar as chances de um acidente ocorrer. Transformar idéias e conceitos em números foi se tornando algo útil e essa quantificação das idéias chegou nas ‘possibilidades’ para nos ajudar a prever o futuro desconhecido.&lt;/p&gt;

&lt;p&gt;E assim na busca pelo dinheiro fácil nos jogos que a matemática de tentar prever o futuro avançou e tornou-se o que conhecemos hoje como &lt;strong&gt;probabilidade&lt;/strong&gt;. Dessa forma era necessário um número fixo e confiável, um valor que mostrasse o quanto uma aposta era mais provável de ganhar que perder, já não bastava apostar um bom dinheiro apenas na intuição “essa jogada tem altas chances de ganhar”, era necessário mais precisão.&lt;/p&gt;

&lt;p&gt;Os jogos em geral são sistemas fáceis de se lidar matematicamente, são poucas as variáveis e seus valores estão acessíveis. Um dado lançado tem 6 valores possíveis, uma carta tirada de um baralho completo virá de uma das 52 cartas. Uma moeda só tem dois lados e quando se lança somente dois resultados possíveis poderão ocorrer: a cara ou a coroa. &lt;strong&gt;Chamamos esses resultados de eventos de um experimento.&lt;/strong&gt; Jogar um dado e anotar a face de cima é um experimento, o valor da face é o evento.&lt;/p&gt;

&lt;p&gt;Imagine que sua chance de ficar rico seja o lançar de um dado de 6 lados. Se você acertar o número que aparecer na face de cima após um lançamento você ficará rico. Se o dado tem 6 lados então temos 5 possibilidades de perder e somente 1 possibilidade de ganhar. E se for um dado de 20 lados? Agora são 19 para 1 a possibilidade de perder. E se lhe fosse permitido escolher 5 números no dado de 6? Então neste caso você teria 5 chances de ganhar e 1 de perder. Seria muito azar não ficar rico.&lt;/p&gt;
&lt;div class=&quot;quadro&quot;&gt;
Não confunda as chances, possibilidades e tentativas. Há apenas uma tentativa em nosso jogo. Perdeu no primeiro lançamento, acabou o sonho. Se for uma moeda você já abre o champanhe antes mesmo de lançar pois as chances são grandes. Se for na Mega Sena você não dá bola, pois sabe que vai perder.
&lt;/div&gt;

&lt;h5 id=&quot;probabilidade-clássica&quot;&gt;Probabilidade Clássica&lt;/h5&gt;

&lt;p&gt;Na probabilidade clássica considera-se que os eventos tem a mesma probabilidade de ocorrerem, ou seja, são equiprováveis. Se você pensar no lançamento do dado a chance de cair qualquer número é igual para todos. É o mesmo caso do lançamento da moeda no cara e coroa ou na retirada do baralho.&lt;/p&gt;

&lt;p&gt;O conjunto de valores possíveis que um evento pode ser se chama Espaço Amostral e é abreviado pela letra &lt;em&gt;‘S’&lt;/em&gt;. A tabela a seguir ilustra o espaço amostral dos exemplos mais comuns:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;Valores possíveis&lt;/th&gt;
      &lt;th&gt;Espaço amostral&lt;/th&gt;
      &lt;th&gt;Número&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Elementos&lt;/td&gt;
      &lt;td&gt;1,2,3,4,5,6&lt;/td&gt;
      &lt;td&gt;$S={1,2,3,4,5,6}$&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Moeda&lt;/td&gt;
      &lt;td&gt;Cara,Coroa&lt;/td&gt;
      &lt;td&gt;$S={Cara,Coroa}$&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Baralho 52 cartas&lt;/td&gt;
      &lt;td&gt;Às de espada,Reis de ouro, 2 de copas, …&lt;/td&gt;
      &lt;td&gt;$S={\text{Às de espada}, …\ \text{Reis de Ouro}}$&lt;/td&gt;
      &lt;td&gt;52&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Na probabilidade clássica como cada elemento do conjunto do espaço tem a mesma probabilidade de ocorrer dividimos 1 (ou 100%) pelo número de eventos possíveis, ou seja, a quantidade de elementos do Espaço amostral para se obter a probabilidade da ocorrência de cada elemento.
Quanto maior o Espaço Amostral menores as chances de um evento ocorrer, como se vê na tabela a seguir.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;Valores possíveis&lt;/th&gt;
      &lt;th&gt;Espaço amostral&lt;/th&gt;
      &lt;th&gt;Probabilidade&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Dado&lt;/td&gt;
      &lt;td&gt;$S={1,2,3,4,5,6}$&lt;/td&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td&gt;$P=\frac{1}{6}=0.16…$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Moeda&lt;/td&gt;
      &lt;td&gt;$S={Cara,Coroa}$&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;$P=\frac{1}{2}=0.50$&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Baralho&lt;/td&gt;
      &lt;td&gt;$S={\text{Às de espada}, …\ \text{Reis de Ouro}}$&lt;/td&gt;
      &lt;td&gt;52&lt;/td&gt;
      &lt;td&gt;$P=\frac{1}{52}=0.019$&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Como se pode ver a probabilidade clássica atribui um número igual para todos os eventos.&lt;/p&gt;

&lt;p&gt;O problema da probabilidade clássica é assumir que todos os elementos do espaço amostral tem a mesma probabilidade e conhecer o número de elementos do espaço amostral, o que nem sempre ocorre na vida real.&lt;/p&gt;

&lt;h4 id=&quot;probabilidade-frequentista&quot;&gt;Probabilidade frequentista&lt;/h4&gt;

&lt;p&gt;A probabilidade se mostrou útil para outras áreas além dos jogos, porém em outras áreas não é possível calcular a probabilidade de um evento ocorrer com uma simples divisão. Em uma indústria de lampadas como saber qual a probabilidade de uma lampada queimar depois de 1000 horas de uso? O senso comum costuma dizer que &lt;em&gt;“Queima ou não queima, então são 50% de queimar.”&lt;/em&gt;. Não, não é assim que funciona.&lt;/p&gt;

&lt;p&gt;Uma outra forma de atribuir probabilidades a eventos é observando diversos experimentos reais e calcular os eventos ocorridos pelo número de observações.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Exemplos:&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;destaque br bl&quot;&gt;Uma indústria testou 100 lampadas ligadas por 1000 horas e depois de 1000 horas 7 delas queimaram.  Qual a probabilidade que uma lampada dessa indústria queime com 1000 horas de uso?&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Efetuando os cálculos:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;$P=\frac{7}{100}=0.07=7\%$&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Há 7% de chance de uma lampada dessa indústria queimar com 1000 horas de uso.&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;destaque br bl&quot;&gt;&lt;p&gt;Um cassino estava sob suspeita de fraude e desconfiou-se que seus dados não são confiáveis. Para dirimir as dúvidas foram lançados 50 vezes o dado e obtido os seguintes valores:&lt;/p&gt;
&lt;table&gt;
&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Valor&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Exibições&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;strong&gt;Probabilidade&lt;/strong&gt;&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;Determine se o dado é confiável.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Efetuando os cálculos:&lt;/strong&gt;&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Exibições&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;9&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Probabilidade&lt;/td&gt;
      &lt;td&gt;$\frac{9}{50}=0.18$&lt;/td&gt;
      &lt;td&gt;$\frac{8}{50}=0.16$&lt;/td&gt;
      &lt;td&gt;$\frac{8}{50}=0.16$&lt;/td&gt;
      &lt;td&gt;$\frac{8}{50}=0.16$&lt;/td&gt;
      &lt;td&gt;$\frac{8}{50}=0.16$&lt;/td&gt;
      &lt;td&gt;$\frac{9}{50}=0.18$&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;Como a probabilidade de um dado confiável (dado pela probabilidade clássica) é $\frac{1}{6}=0.16$ podemos concluir que o dado é confiável.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A probabilidade frequentista tem a desvantagem de ser necessário realizar os experimentos para a obtenção dos dados o que em alguns casos é impraticável, no exemplo da indústria de lâmpadas seria preciso esperar um bom tempo e destruir as lampadas para a obtenção dos dados. Outro problema é saber quantos experimentos realizar. A teoria diz que o correto é a realização de infinitos testes, algo impossível de se realizar.&lt;/p&gt;

&lt;p&gt;Comparada a anterior, a visão frequentista é mais eficiente em determinar as probabilidades de eventos diferentes do espaço amostral do que simplesmente assumir que os eventos são equiprováveis.&lt;/p&gt;

&lt;h4 id=&quot;probabilidade-subjetiva&quot;&gt;Probabilidade subjetiva&lt;/h4&gt;

&lt;p&gt;Enquanto a probabilidade clássica tem total controle sobre o espaço amostral e seus valores e na probabilidade frequentista experimentos são feitos para se obter as probabilidades dos eventos, na probabilidade subjetiva as chances dos eventos ocorrerem é uma opinião pessoal.&lt;/p&gt;

&lt;p&gt;De fato é preferível valores precisos da visão frequentista mas em alguns casos não há histórico das observações ou a possibilidade de realizar os experimentos. Suponha um escritório de advocacia que recebeu um processo de um cliente e este pergunta as chances de se ter vitória? Como calcular isso matematicamente? Em geral, o advogado mais experiente faz as melhores previsões.&lt;/p&gt;

&lt;p&gt;Nos cargos de gerência e situações de tomada de decisões um dos atributos mais importantes é perceber corretamente as probabilidades dos eventos. &lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;

&lt;div class=&quot;destaque amarelo bt&quot;&gt;
&lt;strong&gt;Curiosidade:&lt;/strong&gt;

O &lt;strong&gt;big data&lt;/strong&gt; é uma grande quantidade de dados de alguma área registrados em computador. Ao dirigir usando o GPS este registra o trânsito, tempo de viagem, percurso e ocorrências de todas as pessoas que usam ele; essa grande quantidade de dados com o uso de computadores ajuda o GPS a calcular a probabilidade e o tempo de viagem em um dado dia e horário.

Os escritórios de advocacia e os tribunais tem registro de milhares de processos que estão sendo fontes de big data para que programas calculem, usando métodos frequentistas e de processamento de linguagem, as chances dos litígios.
&lt;/div&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Para um leitor de nível superior a conclusão não segue o rito normal da inferência estatística. Porém o artigo é direcionado ao nível médio e o leitor pode concordar que intuitivamente é uma conclusão válida. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Read, D. (2005). Judgment and Choice. In K. Kempf-Leonard (Ed.), Encyclopedia of Social Measurement (pp. 401–407). Elsevier. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;</content><author><name></name></author><category term="aplicadas" /><category term="matemática" /><category term="probabilidade" /><summary type="html">Todas as coisas são números. Transformando idéias e sensações em números</summary></entry><entry><title type="html">Inferência estatística - Matemática</title><link href="http://0.0.0.0:4000/aplicadas/2022/08/01/infer%C3%AAncia-estatistica.html" rel="alternate" type="text/html" title="Inferência estatística - Matemática" /><published>2022-08-01T00:00:00-05:00</published><updated>2022-08-01T00:00:00-05:00</updated><id>http://0.0.0.0:4000/aplicadas/2022/08/01/infer%C3%AAncia-estatistica</id><content type="html" xml:base="http://0.0.0.0:4000/aplicadas/2022/08/01/infer%C3%AAncia-estatistica.html">&lt;h2 id=&quot;uma-introdução-à-inferência-estatística&quot;&gt;Uma Introdução à Inferência Estatística&lt;/h2&gt;

&lt;p&gt;Inferência estatística é uma parte crucial da estatística que nos permite tomar decisões a partir dos dados. É uma ferramenta essencial para analisar uma grande variedade de dados e encontrar respostas a questões específicas.&lt;/p&gt;

&lt;h3 id=&quot;definição-de-inferência-estatística&quot;&gt;Definição de Inferência Estatística&lt;/h3&gt;

&lt;p&gt;A Inferência estatística é o processo de usar a análise de dados para deduzir propriedades de uma população ou distribuição de probabilidade. Envolve análise estatística de uma amostra dos dados, gerada pela população. A inferência estatística inclui estimativa de parâmetros e teste de hipóteses.&lt;/p&gt;

&lt;h3 id=&quot;tipos-de-inferência-estatística&quot;&gt;Tipos de Inferência Estatística&lt;/h3&gt;

&lt;p&gt;Existem dois tipos principais de inferência estatística: &lt;strong&gt;estimação de parâmetros&lt;/strong&gt; e &lt;strong&gt;teste de hipóteses&lt;/strong&gt;.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Estimação de parâmetros&lt;/strong&gt;: Isso envolve chegar a uma estimativa da medida de um população a partir de uma amostra. A estimativa pode ser expressa através de um único valor (estimativa pontual) ou um intervalo de valores (estimação intervalar ou intervalo de confiança).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Por exemplo, suponha que você queira saber a altura média dos alunos em uma universidade. Para isso, em vez de medir a altura de todos os alunos, você mede a altura de 100 alunos selecionados aleatoriamente (a amostra) e, com base nesses dados, você estima a altura média de todos os alunos (a população).&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Teste de hipóteses&lt;/strong&gt;: Com base na amostra, uma afirmação é feita sobre a população. Essa afirmação (chamada de hipótese) é testada para aceitação ou rejeição. A hipótese de teste é apenas uma suposição sobre a população de onde a amostra foi retirada.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Por exemplo, se uma empresa de laticínios afirma que a média do teor de gordura de seu leite é de 3,5%, um consumidor preocupado com a saúde pode pegar uma amostra do leite e testar a hipótese de que o teor de gordura média é realmente esse valor.&lt;/p&gt;

&lt;h3 id=&quot;por-que-a-inferência-estatística-é-importante&quot;&gt;Por que a Inferência Estatística é Importante?&lt;/h3&gt;

&lt;p&gt;A inferência estatística desempenha um papel vital na análise de dados. Ela fornece métodos para quantificar a incerteza nas conclusões e usar os dados para tomar decisões informadas. É uma ferramenta fundamental para prever tendências futuras, testar teorias e hipóteses, e tomar decisões estratégicas em negócios e pesquisa.&lt;/p&gt;

&lt;h3 id=&quot;exemplo&quot;&gt;Exemplo&lt;/h3&gt;

&lt;p&gt;Digamos que uma empresa deseja entender quanto tempo seus funcionários gastam em uma tarefa específica para melhorar a eficácia, e para isso colheu uma amostra de 25 funcionários.&lt;/p&gt;

&lt;p&gt;Dado os tempos em minutos:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Tempo em minutos&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;20, 24, 22, 25, 23, 23, 21, 21, 22, 24, 22, 21, 24, 26, 25, 23, 22, 24, 23, 26, 27, 22, 24, 23, 22&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Primeiro, calculamos a média e o desvio padrão dessa amostra:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Média&lt;/strong&gt; $\bar{X} = {\text{soma de todos os tempos} \over \text{número de amostras}}$&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Desvio padrão&lt;/strong&gt; $s = {\sqrt {\sum{(X_i - \bar{X})^2} \over {\text{número de amostras} - 1}}}$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Calculando com os valores dados obtemos as seguintes informações:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Média $\bar{X}$&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;23.16&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Desvio padrão $s$&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;1.71&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Em seguida, podemos usar essas informações para criar um intervalo de confiança de 95% para o tempo médio que todos os funcionários gastam na tarefa. Supomos que as medidas seguem uma distribuição normal.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;$Z_{score}$ para a confiança de $95\% = 1.96$ (Consultando a tabela Z-Score)&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Erro padrão&lt;/strong&gt; $SE = {s \over \sqrt{\text{número de amostras}}}$&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Intervalo de confiança&lt;/strong&gt; = $(\bar{X}) ± Z_{score} \times SE$&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Uma vez que calculamos o intervalo de confiança, podemos dizer que estamos 95% confiantes de que o tempo médio real que todos os funcionários gastam na tarefa está dentro do intervalo de confiança.&lt;/p&gt;

&lt;p&gt;Observe que as fórmulas acima são simplificações e assumem uma distribuição normal e uma amostra grande o suficiente. Os cálculos exatos podem ser mais complexos dependendo dos aspectos específicos dos dados e do que planejamos inferir.&lt;/p&gt;

&lt;p&gt;A inferência estatística é uma parte indispensável da estatística e é usada em várias disciplinas que envolvem tomada de decisões baseadas em dados. Também é essencial para traduzir os dados recolhidos em informações compreensíveis e gerenciáveis, e para transformar essas informações em conhecimento para a tomada de decisões.&lt;/p&gt;

&lt;p&gt;Independentemente de se tratar de negócios, medicina, engenharia ou ciências sociais, a inferência estatística continuará a ser um componente fundamental na coleta, análise e interpretação de dados, permitindo que as pessoas tomem decisões bem fundamentadas.&lt;/p&gt;</content><author><name></name></author><category term="aplicadas" /><category term="matemática" /><category term="estatística" /><summary type="html">Uma Introdução à Inferência Estatística</summary></entry><entry><title type="html">Usando Python para resolver ODEs de circuitos elétricos: RL - Python</title><link href="http://0.0.0.0:4000/eletr%C3%B4nica/2021/02/10/simulacao-circuito-RL-python.html" rel="alternate" type="text/html" title="Usando Python para resolver ODEs de circuitos elétricos: RL - Python" /><published>2021-02-10T00:00:00-06:00</published><updated>2021-02-10T00:00:00-06:00</updated><id>http://0.0.0.0:4000/eletr%C3%B4nica/2021/02/10/simulacao-circuito-RL-python</id><content type="html" xml:base="http://0.0.0.0:4000/eletr%C3%B4nica/2021/02/10/simulacao-circuito-RL-python.html">&lt;h3 id=&quot;usando-python-para-odes-de-circuitos-elétricos-rl&quot;&gt;Usando Python para ODEs de circuitos elétricos: RL&lt;/h3&gt;

&lt;p&gt;Neste artigo explorarei a solução de circuitos elétricos utilizando Python. A solução analítica será encontrada utilizando SymPy enquanto a solução numérica será obtida com SciPy e Numpy.&lt;/p&gt;

&lt;p&gt;Tratarei apenas do circuito RL da figura abaixo pois encontramos neste tipo de circuito apenas uma derivada. Estudaremos os casos para fontes DC e AC.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/circuit-rl.png&quot; alt=&quot;Circuito RL&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para uma fonte DC de 5V o circuito é modelado pela seguinte equação diferencial&lt;/p&gt;

&lt;p&gt;\[5 = 4700 i{\left(t \right)} + 0.0001 \frac{d}{d t} i{\left(t \right)}\]&lt;/p&gt;

&lt;p&gt;Esse é um exemplo de Equação Diferencial Ordinária ou abreviadamente ODE cujas soluções podem ser analíticas ou numéricas. A solução analítica é a solução como conhecemos na escola ou a simples solução algébrica através de manipulação dos símbolos onde obteremos no final uma família de funções matemáticas em que podemos calcular o comportamento do circuito. Obter a solução analítica de uma ODE requer conhecimentos de cálculo 1 e 2 lecionados no nível superior, mas utilizando algum CAS (Computer Álgebra System) a solução pode ser encontrada rapidamente.&lt;/p&gt;

&lt;p&gt;A solução numérica não manipula símbolos, utiliza-se de métodos interativos com tentativa e erros com um certo discernimento de para onde ir em busca da solução. Pode ser feito na mão ou mais adequadamente no computador.&lt;/p&gt;

&lt;h3 id=&quot;requerimentos&quot;&gt;Requerimentos&lt;/h3&gt;

&lt;p&gt;Como as soluções serão procuradas com Python precisaremos dos pacotes SymPy, Numpy, Matplotlib e SciPy que podem ser facilmente instalados utilizando o pip:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip install sympy numpy matplotlib scipy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;destaque grad-orange&quot;&gt;
&lt;h4&gt;Conheça os pacotes usados&lt;/h4&gt;
&lt;ul&gt;
    &lt;li&gt;Numpy - Pacote de manipulação de vetores, matrizes e operações matemáticas em geral. Utiliza internamente o OpenBLAS. Praticamente utilizado por todos os outros pacotes inclusive todos os abaixos.&lt;/li&gt;
    &lt;li&gt;Sympy - Pacote de computação matemática simbólica&lt;/li&gt;
    &lt;li&gt;Matplotlib - Exibe gráficos.&lt;/li&gt;
    &lt;li&gt;Scipy - Um grande pacote com diversas utilidades em vários ramos da ciência.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;p&gt;Em todos os arquivos os imports necessários e a cabeça do arquivo será este:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
from sympy import *
import numpy as np
from scipy.integrate import solve_ivp
import matplotlib.pyplot as plt
%matplotlib inline
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&quot;versão-analítica-com-sympy&quot;&gt;Versão analítica com SymPy&lt;/h3&gt;

&lt;p&gt;A solução analítica pode ser encontrada utilizando o módulo Sympy. É um módulo promissor, mas ainda está em um nível intermediário de maturidade. Não se compara em poder ao Maxima e ao Mathematica.&lt;/p&gt;

&lt;p&gt;A solução analítica de uma ODE utilizando o Sympy é encontrada com o comando &lt;strong&gt;dsolve&lt;/strong&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
S = 5
R = 4700
L = 100e-6

t = Symbol(&apos;t&apos;)
v = Function(&apos;v&apos;)(t)
i = Function(&apos;i&apos;)(t)
    
eq = Eq(S,R*i+L*i.diff(t))
eq
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;O Sympy exibe em formato tex a equação acima como:&lt;/p&gt;

\[5 = 4700 i{\left(t \right)} + 0.0001 \frac{d}{d t} i{\left(t \right)}\]

&lt;p&gt;E como dito a solução analítica é encontrada pelo comando &lt;strong&gt;dsolve&lt;/strong&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dsolve(eq)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;cuja saída será:&lt;/p&gt;

\[\displaystyle i{\left(t \right)} = C_{1} e^{- 47000000.0 t} + \frac{1}{940}\]

&lt;p&gt;Que é a função de $i$ em $t$ como desejamos. $C_1$ é uma constante que como toda equação diferencial e sistemas físicos que armazenam energia essa constante define a condição inicial da função, oras, temos um indutor no circuito que INICIALMENTE pode ter um campo magnético de valor 0 ou qualquer outro valor que iria interferir no início do circuito. Cabe a nós dizer qual é esse campo. Mas em geral começamos com condições iniciais com corrente zero, ou seja, $i(t=0) = 0$.&lt;/p&gt;

&lt;h3 id=&quot;versão-numérica-com-scipy-e-numpy&quot;&gt;Versão numérica com SciPy e Numpy&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;Sim é muito Py. Pois este é poder do Python: Seus módulos! E as pessoas gostam de homenagear o Python colocando o Py no nome.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;A solução numérica será encontrada utilizando o comando &lt;strong&gt;solve_ivp&lt;/strong&gt; porém o correto agora é dizermos “as soluções” pois o que obteremos é uma tabela (List) com os valores numéricos de $i$ em $t$ que utilizaremos para visualizar o gráfico do comportamento da corrente no circuito.&lt;/p&gt;

&lt;p&gt;O &lt;strong&gt;solve_ivp&lt;/strong&gt; precisa que a equação esteja no formato&lt;/p&gt;

\[{dy(t) \over dt}= ...\]

&lt;p&gt;que no nosso caso então seria&lt;/p&gt;

\[{di(t) \over dt}= ...\]

&lt;p&gt;e que esta equação esteja em forma de função Python, dessa forma definimos então a função circuito:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
def circuito(t,i):
    return (5 -4700*i)/0.0001
    
tempo_maximo = 0.000001
t = np.linspace(0,tempo_maximo,1000)
sol = solve_ivp(circuito,[0,tempo_maximo],[0],method=&apos;RK45&apos;,t_eval=t)
plt.plot(sol.t,sol.y[0])
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;O primeiro parâmetro de &lt;strong&gt;solve_ivp&lt;/strong&gt; é nossa função, o segundo o intervalo de tempo que a ODE será integrada e o &lt;em&gt;[0]&lt;/em&gt; é o valor inicial e como foi dito antes a corrente no circuito inicialmente é zero, ou seja &lt;em&gt;[0]&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;Tempo_maximo&lt;/em&gt;&lt;/strong&gt; é crítico. Se um valor maior que o transitório do circuito for colocado não visualizaremos nada de útil, somente o estado estacionário do circuito. Se for muito pequeno veremos apenas o início do estado transitório que provavelmente será uma reta. Com os valores do programa o seguinte gráfico aparecerá:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/grafico-rl.png&quot; alt=&quot;Grafico RL&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Como a fonte é contínua o gráfico se apresenta como o esperado. A corrente começa do zero e vai subindo gradativamente até que o indutor seja somente um curto-circuito e a corrente circulante seja a limitada pelo resistor.&lt;/p&gt;

&lt;h3 id=&quot;fonte-de-tensão-senoidal&quot;&gt;Fonte de tensão senoidal&lt;/h3&gt;

&lt;p&gt;Um circuito de corrente contínua não nos oferece muito, vamos então usar uma fonte de tensão de &lt;em&gt;1Khz&lt;/em&gt; com &lt;em&gt;Vp&lt;/em&gt; de &lt;em&gt;5V&lt;/em&gt;.&lt;/p&gt;

&lt;h3 id=&quot;solução-analítica&quot;&gt;Solução analítica&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
S = 5*sin(t*(2*pi/(1/1000)))
R = 4700
L = 100e-6

t = Symbol(&apos;t&apos;)
v = Function(&apos;v&apos;)(t)
i = Function(&apos;i&apos;)(t)
    
eq = Eq(S,R*i+L*i.diff(t))
eq
dsolve(eq)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A única diferença é a mudança do S com a senoide provida pelo Seno do SymPy &lt;em&gt;sin&lt;/em&gt;. As saídas serão então:&lt;/p&gt;

\[\displaystyle 5 \sin{\left(2000 \pi t \right)} = 4700 i{\left(t \right)} + 0.0001 \frac{d}{d t} i{\left(t \right)}\]

&lt;p&gt;E a solução&lt;/p&gt;

\[\displaystyle i{\left(t \right)} = C_{1} e^{- 47000000.0 t} + 0.00106382976822168 \sin{\left(2000 \pi t \right)} - 1.42217863170866 \cdot 10^{-7} \cos{\left(2000 \pi t \right)}\]

&lt;p&gt;Basicamente uma corrente não defasada com &lt;strong&gt;1.06mA&lt;/strong&gt;. Não entendi o outro cos de valor irrisório. Provavelmente o transitório inicial não seja uma composição pura do exponente e o seno, mas tenha algum componente que deforme a onda (Fourier).&lt;/p&gt;

&lt;h3 id=&quot;solução-numérica&quot;&gt;Solução numérica&lt;/h3&gt;

&lt;p&gt;Já na solução numérica faremos maiores alterações.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-python&quot;&gt;
def circuito(t,i):
    return (5*np.sin(t*(2*np.pi/0.0001)) -4700*i)/0.0001
    
tempo_maximo = 0.001
t = np.linspace(0,tempo_maximo,10000)
sol = solve_ivp(circuito,[0,tempo_maximo],[0],method=&apos;RK45&apos;,t_eval=t)
print(max(sol.y[0]),min(sol.y[0]))

plt.subplots(figsize=(15, 5))
plt.subplot(1, 2, 1)
plt.plot(sol.t,sol.y[0])
plt.subplot(1, 2, 2)
plt.plot(t,5*np.sin(t*(2*np.pi/0.0001)))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As alterações, além da fonte, foi o tempo que foi diminuído e exibimos o i máximo e mínimo como mostrado abaixo:&lt;/p&gt;

&lt;table&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;i máximo&lt;/td&gt;
      &lt;td&gt;0.0010661978534370956&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;i minimo&lt;/td&gt;
      &lt;td&gt;-0.0010652848773317844&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Nos gráficos abaixo o primeiro é a corrente do circuito encontrada pela solução numérica e o outro a tensão da fonte.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/grafico2-rl.png&quot; alt=&quot;Grafico2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Os valores mínimos e máximos mostram uma corrente de &lt;strong&gt;1.06mA&lt;/strong&gt; que confere com a solução analítica obtida anteriormente.&lt;/p&gt;

&lt;h3 id=&quot;falstad&quot;&gt;Falstad&lt;/h3&gt;

&lt;p&gt;Vamos conferir com o simulador de circuitos do Falstad? Que aliás usa de muita solução numérica para simular o circuito.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/imgs/falstad-rl.png&quot; alt=&quot;Falstad&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Como se pode ver no osciloscópio &lt;em&gt;Fonte CA&lt;/em&gt; o &lt;strong&gt;Max=1.064mA&lt;/strong&gt; novamente confere com os cálculos.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://fabiovila.github.io/RL.ipynb&quot;&gt;Link para o ipynb (Jupyter Notebook) deste post.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Espero que tenham gostado. Em breve novos posts!&lt;/p&gt;</content><author><name></name></author><category term="eletrônica" /><category term="eletrônica" /><category term="python" /><category term="circuitos elétricos" /><summary type="html">Usando Python para ODEs de circuitos elétricos: RL</summary></entry></feed>