<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>O CVXPY para o problema de mochila (knapsack) - Fabio</title><meta name="description" content="CVXPYCVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy. Para instalar o CVXPY use o pip: pip install cvxpy Um dos otimizadores disponíveis é o CBC um otimizador de programação linear inteiro open-source. O CBC pode ser usado&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"><link rel="alternate" type="application/atom+xml" href="https://fabiovila.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://fabiovila.github.io/feed.json"><meta property="og:title" content="O CVXPY para o problema de mochila (knapsack)"><meta property="og:image" content="https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png"><meta property="og:site_name" content="Fabio"><meta property="og:description" content="CVXPYCVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy. Para instalar o CVXPY use o pip: pip install cvxpy Um dos otimizadores disponíveis é o CBC um otimizador de programação linear inteiro open-source. O CBC pode ser usado&hellip;"><meta property="og:url" content="https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"><meta property="og:type" content="article"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><link href="https://fonts.googleapis.com/css?family=Rubik:400,700&amp;subset=latin-ext&amp;display=swap" rel="stylesheet"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:'Rubik',sans-serif;--post-entry-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://fabiovila.github.io/assets/css/style.css?v=6eebb2ff5c7e1249c859df4546a257f2"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"},"headline":"O CVXPY para o problema de mochila (knapsack)","datePublished":"2020-07-26T15:35","dateModified":"2021-05-21T20:31","image":{"@type":"ImageObject","url":"https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png","height":381,"width":811},"description":"CVXPYCVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy. Para instalar o CVXPY use o pip: pip install cvxpy Um dos otimizadores disponíveis é o CBC um otimizador de programação linear inteiro open-source. O CBC pode ser usado&hellip;","author":{"@type":"Person","name":"Fabio"},"publisher":{"@type":"Organization","name":"Fabio"}}</script><script>MathJax = {
  tex: {
    inlineMath: [['$', '$']]
  }
};</script><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><link rel="stylesheet" href="assets/css/ft-syntax-highlight-min.css"></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://fabiovila.github.io/">Fabio</a></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2021-05-21T20:32">Maio 21, 2021</time></div><div class="infobar__search"><form action="https://fabiovila.github.io/search.html"><input type="search" name="q" placeholder="search..." aria-label="Search input"> <button type="submit" aria-label="Submit"><svg role="presentation" focusable="false" width="15px" height="14px"><use xlink:href="https://fabiovila.github.io/assets/svg/svg-map.svg#search"/></svg></button></form></div></div><main class="main"><article class="post"><figure class="post__featured-image"><img src="https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png" srcset="https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-xs.png 300w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-sm.png 480w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-md.png 768w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-lg.png 1024w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-xl.png 1360w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-2xl.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="381" width="811" alt=""></figure><header class="u-header post__header"><h1>O CVXPY para o problema de mochila (knapsack)</h1><div class="u-header__meta u-small"><div><a href="https://fabiovila.github.io/authors/fabio/" title="Fabio">Fabio</a> <time datetime="2020-07-26T15:35">Julho 26, 2020 </time><a href="https://fabiovila.github.io/cvxpy/" class="u-tag u-tag--1">cvxpy</a></div></div></header><div class="post__entry u-inner"><h2>CVXPY</h2><p>CVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy.</p><p>Para instalar o CVXPY use o pip:</p><p><code>pip install cvxpy</code></p><p>Um dos otimizadores disponíveis é o <a href="https://projects.coin-or.org/Cbc" target="_blank" rel="noopener noreferrer">CBC</a>  um otimizador de programação linear inteiro open-source. O CBC pode ser usado em linha de comando sem ser necessário o CVXPY, mas neste caso será necessário aprender sua linguagem de entrada. </p><p>Também será necessário instalar o CVXOPT:</p><p><code>pip install cvxopt</code></p><h2>Problema da mochila</h2><p>O problema da mochila mais conhecido como knapsack é um problema clássico de otimização combinatória.</p><p>O problema consiste em colocar o maior valor possível de itens em uma mochila com certa capacidade de peso. A mochila tem uma capacidade definida de peso. Os itens um peso e um valor. A objetivo é ter o maior valor possível dentro da mochila, ou seja, maximizar o valor.</p><p>Esse problema aparece em diversas áreas como a logística, computação e investimentos.</p><pre class="ft-syntax-highlight" data-syntax="html">import cvxpy as cp<br>import numpy as np<br><br><br># Dados de entrada do problema<br><br>Valores = np.array([10,13,1,100,45,13,156,76,4,59,97,99])<br>Pesos = np.array([50,55,10,5,1,98,34,3,9,3,7,19])<br><br>Capacidade_Mochila = 100<br><br># Variaveis de decisão<br># Cada Item Xi terá valor 1 se estiver na mochila ou 0 se estiver fora<br># cp.Variable cria uma variável no CVX ( não confunda cp com np ) do tipo boolean do tamanho da quantidade de itens<br><br>Xi = cp.Variable((Valores.size), boolean = True)<br><br># Constraints do problema<br><br># A soma total dos pesos dos itens escolhidos por Xi devem ser igual ou menor que a capacidade da mochila                <br>constraints = [ Xi @ Pesos &lt;= Capacidade_Mochila ]<br><br># Tambem pode ser escrito com o mesmo resultado como:<br>#constraints = [ cp.sum( cp.multiply (Xi, Pesos ) ) &lt;= Capacidade_Mochila ]<br><br># O Objetivo do problema<br># é maximizar os valores na mochila<br>objective = cp.Maximize( Xi @ Valores )<br><br># finalmente chamamos o solver com verbose para acompanhar <br># o progresso e a execução máxima de 1hr<br>prob = cp.Problem(objective, constraints)              <br>prob.solve(solver=cp.CBC,verbose=True, maximumSeconds = 1 * 60 * 60)         <br>print("Status          : ", prob.status)<br>print("Valor encontrado: ", prob.value)<br>print("Valor de Xi     : ", Xi.value)</pre><p>O problema da mochila tem muitas aplicações práticas principalmente na logística. Imagine uma transportadora que precisa distribuir seus pacotes utilizando vans e caminhões. Cada pacote tem peso, tamanho, localidade, tempo de espera e valor. Um programa de otimização pode ajudar no preenchimento dos caminhões e em aplicações profissionais traçar a rota de distribuição de cada veículo.</p><p>Problemas de otimização não acham o melhor valor, porque em geral é uma tarefa impossível (o mais correto seria improvável) de acha-lo devido a explosão combinatória. Por isso são chamados 'otimizadores' porque eles buscam a melhor solução possível, ou seja, uma solução ótima.</p></div><aside class="post__aside"><div class="post__last-updated u-small">This article was updated on Maio 21, 2021</div><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ffabiovila.github.io%2Fo-cvxpy-para-o-problema-de-mochila-knapsack.html" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer" aria-label="Share with Facebook"><svg class="u-icon"><use xlink:href="https://fabiovila.github.io/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://wa.me/?text=O%20CVXPY%20para%20o%20problema%20de%20mochila%20(knapsack) https%3A%2F%2Ffabiovila.github.io%2Fo-cvxpy-para-o-problema-de-mochila-knapsack.html" class="js-share whatsapp" rel="nofollow noopener noreferrer" title="Share with WhatsApp" aria-label="Share with WhatsApp"><svg class="u-icon"><use xlink:href="https://fabiovila.github.io/assets/svg/svg-map.svg#whatsapp"/></svg> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Ffabiovila.github.io%2Fo-cvxpy-para-o-problema-de-mochila-knapsack.html&amp;title=O%20CVXPY%20para%20o%20problema%20de%20mochila%20(knapsack)" class="js-share linkedin" title="Share with LinkedIn" rel="nofollow noopener noreferrer" aria-label="Share with LinkedIn"><svg class="u-icon"><use xlink:href="https://fabiovila.github.io/assets/svg/svg-map.svg#linkedin"/></svg></a></div></aside><footer class="post__footer"><div class="post__bio box"><div><h4 class="h6"><a href="https://fabiovila.github.io/authors/fabio/" title="Fabio">Fabio</a></h4></div></div><nav class="post__nav box"><div class="post__nav__next"><a href="https://fabiovila.github.io/fazendo-um-cardapio-de-cafe-da-manha-com-calorias-e-baixo-custo-no-or-tools.html" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>Fazendo uma dieta de café da manhã de baixo custo no OR-TOOLs</h5></div><img src="https://fabiovila.github.io/media/posts/2/responsive/bread-18987_640-xs.jpg" loading="lazy" alt=""></a></div></nav></footer></article></main><div class="sidebar"><section class="box authors"><h3 class="box__title">Authors</h3><ul class="authors__cotainer"><li class="authors__item"><div><a href="https://fabiovila.github.io/authors/fabio/" class="authors__title">Fabio</a> <span class="u-small">Post: 2</span></div></li></ul></section><section class="box"><h3 class="box__title">Tags</h3><ul class="tags"><li><a href="https://fabiovila.github.io/cvxpy/">cvxpy</a> <span class="u-small">(2)</span></li><li><a href="https://fabiovila.github.io/otimizacao/">otimização</a> <span class="u-small">(2)</span></li><li><a href="https://fabiovila.github.io/python/">python</a> <span class="u-small">(2)</span></li></ul></section></div><footer class="footer"><a class="footer__logo" href="https://fabiovila.github.io/">Fabio</a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright"><p>Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></p></div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://fabiovila.github.io/assets/js/scripts.min.js?v=3dc768003cc6d66c9e7bf0904e71d3e8"></script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script></body></html>