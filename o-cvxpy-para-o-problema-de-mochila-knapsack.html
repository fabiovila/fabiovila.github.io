<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="stylesheet" href="https://fabiovila.github.io/assets/css/high/androidstudio.css?v=9e7d7647550e9ab1816737c96edda3ea"><script src="https://fabiovila.github.io/assets/js/highlight.min.js?v=794898ca191671a50f3d9908f4fa4815"></script><title>O CVXPY para o problema de mochila (knapsack) - Fabio</title><meta name="description" content="CVXPY CVXPY é um framework python para diversos otimizadores com uma linguagem&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"><link rel="alternate" type="application/atom+xml" href="https://fabiovila.github.io/feed.xml"><link rel="alternate" type="application/json" href="https://fabiovila.github.io/feed.json"><meta property="og:title" content="O CVXPY para o problema de mochila (knapsack)"><meta property="og:image" content="https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png"><meta property="og:site_name" content="Fabio"><meta property="og:description" content="CVXPY CVXPY é um framework python para diversos otimizadores com uma linguagem&hellip;"><meta property="og:url" content="https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"><meta property="og:type" content="article"><style>:root{--body-font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--heading-font:var(--body-font);--logo-font:var(--body-font);--menu-font:var(--body-font)}</style><link rel="stylesheet" href="https://fabiovila.github.io/assets/css/style.css?v=5a499c9a3461a86b6dd831e2fe2fa93b"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://fabiovila.github.io/o-cvxpy-para-o-problema-de-mochila-knapsack.html"},"headline":"O CVXPY para o problema de mochila (knapsack)","datePublished":"2020-07-26T15:35","dateModified":"2021-06-02T13:47","image":{"@type":"ImageObject","url":"https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png","height":381,"width":811},"description":"CVXPY CVXPY é um framework python para diversos otimizadores com uma linguagem&hellip;","author":{"@type":"Person","name":"Fabio"},"publisher":{"@type":"Organization","name":"Fabio"}}</script><script>MathJax = {
  tex: {
    inlineMath: [['$', '$']]
  }
};</script><script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script></head><body><div class="container"><header class="header"><a href="https://fabiovila.github.io/" class="logo">Fabio</a></header><main><article class="post wrapper"><header class="hero"><p class="post__meta">By <a href="https://fabiovila.github.io/authors/fabio/" rel="author" title="Fabio">Fabio</a> Published on <time datetime="2020-07-26T15:35">julho 26, 2020</time></p><h1 class="post__title">O CVXPY para o problema de mochila (knapsack)</h1></header><figure class="post__featured-image post__image--wide"><img src="https://fabiovila.github.io/media/posts/1/Screenshot-from-2021-05-15-17-39-07-2.png" srcset="https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-xs.png 300w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-sm.png 480w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-md.png 768w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-lg.png 1024w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-xl.png 1360w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-2xl.png 1600w, https://fabiovila.github.io/media/posts/1/responsive/Screenshot-from-2021-05-15-17-39-07-2-sm2.png 375w" sizes="(max-width: 1600px) 100vw, 1600px" loading="eager" height="381" width="811" alt=""></figure><div class="post__entry"><h2>CVXPY</h2><p>CVXPY é um framework python para diversos otimizadores com uma linguagem própria e suporte a Numpy.</p><p>Para instalar o CVXPY use o pip:</p><p><code class="language-bash">pip install cvxpy</code></p><p>Um dos otimizadores disponíveis é o <a href="https://projects.coin-or.org/Cbc" target="_blank" rel="noopener noreferrer">CBC</a>  um otimizador de programação linear inteiro open-source. O CBC pode ser usado em linha de comando sem ser necessário o CVXPY, mas neste caso será necessário aprender sua linguagem de entrada. </p><p>Também será necessário instalar o CVXOPT:</p><p><code class="language-bash">pip install cvxopt</code></p><h2>Problema da mochila</h2><p>O problema da mochila mais conhecido como knapsack é um problema clássico de otimização combinatória.</p><p>O problema consiste em colocar o maior valor possível de itens em uma mochila com certa capacidade de peso. A mochila tem uma capacidade definida de peso. Os itens um peso e um valor. A objetivo é ter o maior valor possível dentro da mochila, ou seja, maximizar o valor.</p><p>Esse problema aparece em diversas áreas como a logística, computação e investimentos.</p><pre><code class="language-python">import cvxpy as cp
import numpy as np
# Dados de entrada do problema
Valores = np.array([10,13,1,100,45,13,156,76,4,59,97,99])
Pesos = np.array([50,55,10,5,1,98,34,3,9,3,7,19])
Capacidade_Mochila = 100<br>
# Variaveis de decisão<br>
# Cada Item Xi terá valor 1 se estiver na mochila ou 0 se estiver fora
# cp.Variable cria uma variável no CVX ( não confunda cp com np ) do tipo boolean do tamanho da quantidade de itens
<br>Xi = cp.Variable((Valores.size), boolean = True)
<br># Constraints do problema<br>
# A soma total dos pesos dos itens escolhidos por Xi devem ser igual ou menor que a capacidade da mochila                
<br>constraints = [ Xi @ Pesos &lt;= Capacidade_Mochila ]
# Tambem pode ser escrito com o mesmo resultado como:
#constraints = [ cp.sum( cp.multiply (Xi, Pesos ) ) &lt;= Capacidade_Mochila ]
<br># O Objetivo do problema
# é maximizar os valores na mochila<br>
objective = cp.Maximize( Xi @ Valores )
<br># finalmente chamamos o solver com verbose para acompanhar 
# o progresso e a execução máxima de 1hr<br>
prob = cp.Problem(objective, constraints)              
prob.solve(solver=cp.CBC,verbose=True, maximumSeconds = 1 * 60 * 60)         
print("Status          : ", prob.status)
print("Valor encontrado: ", prob.value)
print("Valor de Xi     : ", Xi.value)
    </code></pre><p>O problema da mochila tem muitas aplicações práticas principalmente na logística. Imagine uma transportadora que precisa distribuir seus pacotes utilizando vans e caminhões. Cada pacote tem peso, tamanho, localidade, tempo de espera e valor. Um programa de otimização pode ajudar no preenchimento dos caminhões e em aplicações profissionais traçar a rota de distribuição de cada veículo.</p><p>Problemas de otimização não acham o melhor valor, porque em geral é uma tarefa impossível (o mais correto seria improvável) de acha-lo devido a explosão combinatória. Por isso são chamados 'otimizadores' porque eles buscam a melhor solução possível, ou seja, uma solução ótima.</p></div><footer class="post__footer"><div class="post__last-updated">This article was updated on junho 2, 2021</div><div class="post__footer__col"><ul class="post__tag"><li><a href="https://fabiovila.github.io/cvxpy/">cvxpy</a></li><li><a href="https://fabiovila.github.io/otimizacao/">otimização</a></li><li><a href="https://fabiovila.github.io/python/">python</a></li></ul><div class="post__share"><a href="https://api.whatsapp.com/send?text=O%20CVXPY%20para%20o%20problema%20de%20mochila%20(knapsack) https%3A%2F%2Ffabiovila.github.io%2Fo-cvxpy-para-o-problema-de-mochila-knapsack.html" class="js-share whatsapp" aria-label="Share with Whats App" rel="nofollow noopener noreferrer"><svg class="icon"><use xlink:href="https://fabiovila.github.io/assets/svg/svg-map.svg#whatsapp"/></svg></a></div></div><nav class="post__nav"><div class="post__nav__next">Next Post<h5><a href="https://fabiovila.github.io/fazendo-um-cardapio-de-cafe-da-manha-com-calorias-e-baixo-custo-no-or-tools.html" class="inverse" rel="next">Fazendo uma dieta de café da manhã de baixo custo no OR-TOOLs</a></h5></div></nav><div class="post__bio"><div><h3><a href="https://fabiovila.github.io/authors/fabio/" class="inverse" title="Fabio">Fabio</a></h3></div></div><div class="post__related"><h3 class="u-h5">Related posts</h3><div class="post__related__wrap"><figure><a href="https://fabiovila.github.io/rede-neural-em-python-numpy-para-iris-dataset.html"><img src="https://fabiovila.github.io/media/posts/6/responsive/Captura-de-tela-de-2021-06-02-14-23-17-xs.png" loading="lazy" alt=""></a><figcaption><h4><a href="https://fabiovila.github.io/rede-neural-em-python-numpy-para-iris-dataset.html" class="inverse">Rede neural em python numpy para iris dataset</a></h4><time datetime="2021-06-02T11:41">junho 2, 2021</time></figcaption></figure></div></div></footer></article></main><footer class="footer"><div class="footer__copyright">Powered by <a href="https://getpublii.com" target="_blank" rel="nofollow noopener">Publii</a></div></footer></div><script defer="defer" src="https://fabiovila.github.io/assets/js/scripts.min.js?v=c3bbc0611ea6a5405014eaca34fe1814"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.navbar'};</script><script>/*<![CDATA[*/var images=document.querySelectorAll("img[loading]");for(var i=0;i<images.length;i++){if(images[i].complete){images[i].classList.add("is-loaded")}else{images[i].addEventListener("load",function(){this.classList.add("is-loaded")},false)}};/*]]>*/</script></body></html>